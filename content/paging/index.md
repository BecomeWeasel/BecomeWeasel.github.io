---
emoji: ðŸ““
title: ìš´ì˜ì²´ì œì˜ ë©”ëª¨ë¦¬ í›”ì³ë³´ê¸° 1íŽ¸ - íŽ˜ì´ì§•(Paging)
date: '2022-01-17 08:00:00'
author: weasel
tags: ìš´ì˜ì²´ì œ Paging Segmentation
categories: ìš´ì˜ì²´ì œ
---
ìš´ì˜ì²´ì œì˜ í•µì‹¬ ë¶€ë¶„ì¸ í•˜ë‚˜ì¸ ë©”ëª¨ë¦¬ ê´€ë¦¬ì— ëŒ€í•´ì„œ ì ê² ë‹¤.

ëŒ€ëžµ 3íŽ¸ìœ¼ë¡œ êµ¬ì„±ë˜ë©° íŽ˜ì´ì§•,ê°€ìƒë©”ëª¨ë¦¬,íŽ˜ì´ì§€ êµì²´ ì•Œê³ ë¦¬ì¦˜ ìˆœì´ë‹¤.

## MMU

CPUëŠ” í”„ë¡œì„¸ìŠ¤ë¥¼ êµ¬ë™í•  ë•Œ PCë¥¼ ì°¸ì¡°í•´ì„œ ë‹¤ìŒ ëª…ë ¹ì–´ë¥¼ ë©”ëª¨ë¦¬ì—ì„œ ê°€ì ¸ì˜¨ë‹¤. ëª…ë ¹ì–´ë¥¼ ì°¸ê³ í•´ í•„ìš”í•œ ë°ì´í„°ê°€ ìžˆìœ¼ë©´ ë©”ëª¨ë¦¬ì—ì„œ ê°€ì ¸ì˜¤ëŠ”ë° ì´ë•Œ ì£¼ì†Œì²´ê³„ê°€ ì„œë¡œ ë‹¤ë¥´ë‹¤.

ì•„ëž˜ì˜ ê·¸ë¦¼ì²˜ëŸ¼ baseì™€ limit ë ˆì§€ìŠ¤í„° ì•ˆì— ìžˆëŠ” ê°’ë“¤ì„ ì¡°í•©í•´ì„œ CPUê°€ ì‚¬ìš©í•˜ëŠ” ì£¼ì†Œ(**ë…¼ë¦¬ ì£¼ì†Œ**)ì™€ ì‹¤ì œ ë©”ëª¨ë¦¬ ì£¼ì†Œ(**ë¬¼ë¦¬ ì£¼ì†Œ**)ë¥¼ êµ¬í•  ìˆ˜ ìžˆë‹¤.
![base_limit](./base_limit.png)

ê·¸ëŸ¬ë©´ ì™œ ë‘ ì£¼ì†Œë¥¼ êµ¬ë¶„í•˜ì˜€ì„ê¹Œ?

**ê°€ìž¥ í° ì´ìœ ëŠ” ë³´ì•ˆì´ë‹¤.** Limit ë ˆì§€ìŠ¤í„°ë¥¼ ë‘ ìœ¼ë¡œì¨, P1ì´ P2ì˜ ë©”ëª¨ë¦¬ ì˜ì—­ì„ ì°¸ì¡°í•˜ëŠ” Memory Illegal Accessë¥¼ ë°©ì§€í•˜ëŠ” Protectionì˜ ê¸°ëŠ¥ì„ ìˆ˜í–‰í•œë‹¤.

MMUëŠ” Memory-Management Unitì˜ ì•½ìžë¡œ ìœ„ì—ì„œ ë§í•œ **ë…¼ë¦¬ì£¼ì†Œë¥¼ ë¬¼ë¦¬ì£¼ì†Œë¡œ ëŒ€ì‘**ì‹œì¼œì£¼ëŠ” HW ìž¥ì¹˜ì´ë‹¤.

MMU ë°©ì‹ì—ì„œëŠ” **relocation ë ˆì§€ìŠ¤í„°**ê°€ ì¡´ìž¬í•˜ëŠ”ë°, í”„ë¡œì„¸ìŠ¤ê°€ ë©”ëª¨ë¦¬ ì£¼ì†Œë¥¼ ë§Œë“¤ë•Œë§ˆë‹¤ relocation ë ˆì§€ìŠ¤í„° ì•ˆì˜ ê°’ì´ ë”í•´ì§€ê³  ì´ë¥¼ í†µí•´ì„œ ë©”ëª¨ë¦¬ì— ì ‘ê·¼í•  ìˆ˜ ìžˆê²Œ ëœë‹¤.
>base ë ˆì§€ìŠ¤í„°ì™€ ì—­í• ì´ ë™ì¼í•˜ë‹¤ê³  ìƒê°í•˜ë©´ ëœë‹¤.
![mmu](./mmu.png)


## ì—°ì†ì ì¸ í• ë‹¹(Contiguous Allocation)

ë©”ëª¨ë¦¬ì— í”„ë¡œê·¸ëž¨ì„ ì—°ì†ì ìœ¼ë¡œ í• ë‹¹í•˜ëŠ” ë°©ë²•ì´ë‹¤. ê°„ë‹¨í•˜ê²Œ ë§í•´ì„œ ì•„ëž˜ì—ì„œë¶€í„° ì°¨ë¡€ì°¨ë¡€ ì±„ì›Œê°€ëŠ” ë°©ì‹. ë©”ëª¨ë¦¬ë¥¼ ì—°ì†ì ìœ¼ë¡œ ì‚¬ìš©í•˜ê¸° ë•Œë¬¸ì— ê°„ë‹¨í•œ MMUë§Œìœ¼ë¡œ êµ¬í˜„í•  ìˆ˜ ìžˆë‹¤. 

ì¼ë°˜ì ìœ¼ë¡œ ì»¤ë„ì€ ë‚®ì€ ë©”ëª¨ë¦¬ì£¼ì†Œì— ë°°ì¹˜ë˜ê³ , ìœ ì € í”„ë¡œì„¸ìŠ¤ëŠ” ë†’ì•„ì§€ëŠ” ë©”ëª¨ë¦¬ ì£¼ì†Œë¥¼ ê°€ì§„ë‹¤.

ë˜ ì»¤ë„ì„ ì œì™¸í•œ ë©”ëª¨ë¦¬ ì˜ì—­ì„ í•˜ë‚˜ë¡œ ë³´ëŠ” ë°©ì‹ê³¼ ì—¬ëŸ¬ê°œì˜ íŒŒí‹°ì…˜ìœ¼ë¡œ ë³´ëŠ” ë°©ì‹ì´ ìžˆë‹¤.

ì—¬ëŸ¬ê°œì˜ íŒŒí‹°ì…˜ìœ¼ë¡œ í• ë‹¹í•˜ëŠ” ë°©ë²•ì—ì„œëŠ” ë‹¤ìˆ˜ì˜ ê³ ì •ëœ í¬ê¸°ì˜ íŒŒí‹°ì…˜ìœ¼ë¡œ ë‚˜ëˆ„ì–´ì ¸ ìžˆê³ , 2ê°œ ì´ìƒì˜ íŒŒí‹°ì…˜ì— í• ë‹¹í• ë•ŒëŠ” í•©ë³‘(merge)í•´ì„œ í• ë‹¹í•œë‹¤.
![multiple](./multiple.png)

ê·¸ëŸ°ë° ê·¸ë¦¼ì—ì„œ ë§ˆì§€ë§‰ ë‹¨ê³„ë¥¼ ìž˜ë³´ë©´ P10ê³¼ P2 ì‚¬ì´ì˜ ë¹ˆ ê³µê°„ì´ ë³´ì¸ë‹¤.
ì´ê²ƒì„ **Hole**ì´ë¼ê³  í•˜ëŠ”ë°, ë‹¨ìˆœížˆ ë§í•´ì„œ í• ë‹¹ê°€ëŠ¥í•œ ë©”ëª¨ë¦¬ì˜ ì˜ì—­ì´ë‹¤.

ì´ Holeì€ í¬ê¸°ê°€ ì»¤ì„œ í”„ë¡œì„¸ìŠ¤ë¥¼ í• ë‹¹ë°›ì„ ì •ë„ê°€ ë˜ë©´ ë¬¸ì œê°€ ë˜ì§€ ì•Šì§€ë§Œ, ê·¸ í¬ê¸°ê°€ ìž‘ì„ë•ŒëŠ” **íŒŒíŽ¸í™”** ë¬¸ì œê°€ ìƒê¸¸ ìˆ˜ ìžˆë‹¤.

## íŒŒíŽ¸í™” (Fragmentation)

íŒŒíŽ¸í™” í˜¹ì€ ë‹¨íŽ¸í™”ëŠ” ë©”ëª¨ë¦¬ ë‚´ì—ì„œ í• ë‹¹ê°€ëŠ¥í•œ ì˜ì—­ì´ ì¡´ìž¬í•˜ì§€ë§Œ, í• ë‹¹ì´ ë¶ˆê°€ëŠ¥í•œ ìƒíƒœë¥¼ ì˜ë¯¸í•œë‹¤. ë‘ê°€ì§€ ì¢…ë¥˜ê°€ ìžˆë‹¤.

- **ë‚´ë¶€ íŒŒíŽ¸í™”**
    - í• ë‹¹ì„ í•˜ëŠ” ë‹¨ìœ„ê°€ ì¡´ìž¬í• ë•Œ ìƒê¸´ë‹¤.
    - í”„ë¡œê·¸ëž¨ì´ **í•„ìš”í•œ ì‚¬ì´ì¦ˆë³´ë‹¤ ë” í° ë©”ëª¨ë¦¬ê°€ í• ë‹¹**ë˜ë©´ì„œ **íŒŒí‹°ì…˜ ë‚´ë¶€ì **ìœ¼ë¡œ **ë©”ëª¨ë¦¬ ê³µê°„ì´ ë‚­ë¹„**ë˜ëŠ” ìƒí™©
        
        ![Untitled](./1.png)
        
- **ì™¸ë¶€ íŒŒíŽ¸í™”**
    - ë‚¨ì•„ìžˆëŠ” ë©”ëª¨ë¦¬ê°€ í©ì–´ì ¸ ìžˆì–´ì„œ **ì´ ë©”ëª¨ë¦¬ ì–‘ì€ í• ë‹¹í•  ìˆ˜ ìžˆì„ ì •ë„ì¸ë° ì‹¤ì œë¡  í• ë‹¹í•  ìˆ˜ ì—†ì„ë•Œ**
        
        ![Untitled](./2.png)
        
    - ë‚´ë¶€ íŒŒíŽ¸í™”ì™€ëŠ” ë‹¤ë¥´ê²Œ í• ë‹¹ì„ í•˜ëŠ” ë‹¨ìœ„ê°€ ì¡´ìž¬í•´ë„ ìƒê¸°ê³ , ì¡´ìž¬í•˜ì§€ ì•Šì•„ë„ ìƒê¸¸ ìˆ˜ ìžˆë‹¤.
        - ì¡´ìž¬í• ë•ŒëŠ” ì™œ ìƒê¸¸ê¹Œ?
            - Bí”„ë¡œì„¸ìŠ¤ì˜ ë‹¤ìŒ ë©”ëª¨ë¦¬ ê³µê°„ì„ ë³´ìž.  
                ì›ëž˜ëŠ” í”„ë¡œì„¸ìŠ¤ê°€ ë“¤ì–´ê°ˆ ìžë¦¬ì¸ë°ë„ ê·¸ í”„ë¡œì„¸ìŠ¤ê°€ ëë‚˜ê³  Dê°€ ëë‚˜ì§€ ì•Šì•˜ë‹¤ë©´ CëŠ” ë“¤ì–´ê°€ì§€ ëª»í•œë‹¤.
    - ì¦‰, ì‚¬ìš©ê°€ëŠ¥í•œ ë©”ëª¨ë¦¬ ì˜ì—­ì€ ìžˆëŠ”ë°, **ì—°ì†ì ì´ì§€ ì•Šì€ê²ƒì´ë‹¤.**
    - **ì••ì¶•**(compaction) ê¸°ë²•ì„ í†µí•´ì„œ í•´ê²° í•  ìˆ˜ ìžˆëŠ”ë°, **ì˜¤ë²„í—¤ë“œê°€ í¬ë‹¤.** (JVM GCì˜ mark-and-compaction ìƒê°í•´ë³´ìž.)

## ì„¸ê·¸ë©˜í…Œì´ì…˜ (Segmentation)

íŽ˜ì´ì§• ë°©ë²•ì—ì„œëŠ” ê°€ìƒ ë©”ëª¨ë¦¬ë¥¼ ì„œë¡œ **ê°™ì€** í¬ê¸°ë¡œ ë¶„í• í–ˆì§€ë§Œ, ì„¸ê·¸ë¨¼í…Œì´ì…˜ ë°©ë²•ì—ì„œëŠ” ì„œë¡œ í¬ê¸°ê°€ ë‹¤ë¥¸ ë…¼ë¦¬ì  ë‹¨ìœ„ì¸ ì„¸ê·¸ë¨¼íŠ¸ë¡œ ë¶„í• í•œë‹¤.

ì„¸ê·¸ë¨¼íŠ¸ë“¤ì˜ í¬ê¸°ê°€ ê°ê° ë‹¤ë¥´ê¸° ë•Œë¬¸ì—(codeë¥¼ ìœ„í•œê²ƒ,ë°ì´í„°ë¥¼ ìœ„í•œê²ƒ...) í•„ìš”í• ë•Œë§ˆë‹¤ ë¹ˆ ê³µê°„ì„ ì°¾ì•„ì„œ í•´ê²°í•œë‹¤.

í”„ë¡œì„¸ìŠ¤ê°€ ë”± í•„ìš”í•œ ë§Œí¼ë§Œ ë©”ëª¨ë¦¬ë¥¼ ë°°ì •í•´ì£¼ê¸° ë•Œë¬¸ì— ë‚´ë¶€íŒŒíŽ¸í™” ë¬¸ì œëŠ” ì—†ì§€ë§Œ, **ì™¸ë¶€ íŒŒíŽ¸í™” ë¬¸ì œëŠ” ì¡´ìž¬í•œë‹¤.**

- ì•„ëž˜ ê·¸ë¦¼ì„ ë³´ìž. (a)ë²ˆ ìƒí™©ì—ì„œ Segement 1ì´ ë¹ ì§€ê³  S7ì´ ë“¤ì–´ì˜¤ë©´, S7ì´ ë” ìž‘ê¸° ë•Œë¬¸ì— ê³µê°„ì—ëŠ” ë§žì§€ë§Œ S2ì™€ S7 ì‚¬ì´ì— ë¹ˆê³µê°„ì´ ìƒê¸´ë‹¤.![Untitled](./3.png)
- ë¹„ìŠ·í•œ ìƒí™©ì´ S4ê°€ ë‚˜ê°€ê³  S5ê°€ ë“¤ì–´ì˜¤ëŠ” ìƒí™©ì—ì„œë„ ìƒê¸°ê³  3ê³¼ 6ì˜ ìƒí™©ì—ì„œë„ ìƒê¸´ë‹¤.
ì´ëŸ° ë¹ˆ ê³µê°„ì´ ìƒê¸°ê¸° ë•Œë¬¸ì— **ì„¸ê·¸ë©˜í…Œì´ì…˜ì€ ì™¸ë¶€íŒŒíŽ¸í™” ë¬¸ì œ**ê°€ ì—¬ì „ížˆ ì¡´ìž¬í•œë‹¤.
    
    

## íŽ˜ì´ì§• (Paging)

**ë…¼ë¦¬ì  ë©”ëª¨ë¦¬ ì£¼ì†Œ ê³µê°„ì´ ë¬¼ë¦¬ì ì¸ ë©”ëª¨ë¦¬ ê³µê°„ì—ì„œ ë¹„ì—°ì†ì ìœ¼ë¡œ ë°°ì¹˜í•˜ê²Œë” í—ˆìš©**í•˜ëŠ” ê¸°ë²•ì„ ì˜ë¯¸í•œë‹¤.

ë¬¼ë¦¬ë©”ëª¨ë¦¬ë¥¼ ê³ ì •ëœ ì‚¬ì´ì¦ˆì˜ **í”„ë ˆìž„(Frame)** ì´ë¼ëŠ” í¬ê¸°ë¡œ ë‚˜ëˆ„ê³ , ë™ì¼í•œ ì‚¬ì´ì¦ˆë¡œ ë…¼ë¦¬ë©”ëª¨ë¦¬ë¥¼ **íŽ˜ì´ì§€(Page)** ë¡œ ë‚˜ëˆˆë‹¤.

ì¦‰ , í”„ë¡œì„¸ìŠ¤ê°€ ì¼ì •ëŸ‰ì˜ íŽ˜ì´ì§€ë¥¼ ìš”êµ¬í•˜ë©´, ê°™ì€ ì–‘ì˜ ì¶©ë¶„í•œ í”„ë ˆìž„ì„ ì°¾ì•„ì„œ ë§¤ì¹˜ì‹œì¼œì¤€ë‹¤. ê·¸ë ‡ê¸° ë•Œë¬¸ì— í—ˆìš©ê°€ëŠ¥í•œ í”„ë ˆìž„ì„ ì¶”ì í•´ì•¼í•œë‹¤. 

ë˜ íŽ˜ì´ì§€ì™€ ë§¤ì¹˜ë˜ëŠ” í”„ë ˆìž„ì„ ì°¾ê¸° ìœ„í•´ **íŽ˜ì´ì§€ í…Œì´ë¸”**ì„ ê´€ë¦¬í•´ì•¼ í•œë‹¤.

í•˜ì§€ë§Œ ì™¸ë¶€ íŒŒíŽ¸í™” ë¬¸ì œëŠ” í•´ê²°í•  ìˆ˜ ìžˆì§€ë§Œ(ë¹„ì—°ì†ì ìœ¼ë¡œ ë°°ì¹˜í•˜ë‹ˆ) **ë‚´ë¶€ íŒŒíŽ¸í™” ë¬¸ì œëŠ” ì—¬ì „ížˆ ì¡´ìž¬í•œë‹¤.** 

![Untitled](./4.png)

ìœ„ì˜ ê·¸ë¦¼ì²˜ëŸ¼ í”„ë¡œì„¸ìŠ¤ì˜ ë©”ëª¨ë¦¬ì£¼ì†Œë¥¼ **ê°™ì€ í¬ê¸°ì˜ íŽ˜ì´ì§€**ë¡œ ë‚˜ëˆ„ê³  ë¬¼ë¦¬ ë©”ëª¨ë¦¬ì˜ **í”„ë ˆìž„**ê³¼ ëŒ€ì‘ì‹œí‚¨ë‹¤.

ì´ ëŒ€ì‘ì´ë¼ëŠ” ê²ƒì€ ë…¼ë¦¬ì£¼ì†Œë¥¼ ë‹¨ìˆœížˆ êµ¬ì„±í•  ìˆœ ì—†ê³ , ì¼ë°˜ì ìœ¼ë¡œ `2^m`ë°”ì´íŠ¸ì˜ ë…¼ë¦¬ ë©”ëª¨ë¦¬ ì‚¬ì´ì¦ˆì™€ íŽ˜ì´ì§€ ì‚¬ì´ì¦ˆê°€ `2^n`ë°”ì´íŠ¸ì¼ë•Œ, ì•„ëž˜ì™€ ê°™ì´ m ë¹„íŠ¸ë¥¼ (m-n)ë¹„íŠ¸,në¹„íŠ¸ë¡œ êµ¬ì„±í•œë‹¤.

![Untitled](./5.png)

íŽ˜ì´ì§€ ì˜¤í”„ì…‹ì€ `2^n`ë°”ì´íŠ¸ì˜ íŽ˜ì´ì§€ ì¤‘ì—ì„œ í˜„ìž¬ ëª‡ë²ˆì§¸ ë°”ì´íŠ¸ë¥¼ ì§€ì‹œí•˜ëŠ”ì§€ ì•Œë ¤ì£¼ê³ , m-në¹„íŠ¸ì˜ íŽ˜ì´ì§€ ë„˜ë²„ëŠ” íŽ˜ì´ì§€ í…Œì´ë¸” ë‚´ì—ì„œ ëª‡ë²ˆì§¸ í”„ë ˆìž„ì„ ê°€ë¦¬í‚¤ëŠ”ë° ì‚¬ìš©ëœë‹¤.

![Untitled](./6.png)

ì´ëŸ¬í•œ íŽ˜ì´ì§• ë°©ì‹ì—ì„œ ë…¼ë¦¬ì£¼ì†Œ ë³€í™˜ì€ ìœ„ì˜ êµ¬ì¡°ë¥¼ ê°€ì§„ë‹¤.  
ìž˜ë³´ë©´ offsetì¸ dëŠ” ì£¼ì†Œ ë³€í™˜ì—ëŠ” ì•ˆì“°ì´ê³  ë°”ë¡œ ë¬¼ë¦¬ì£¼ì†Œì— ëŒ€ì‘ì‹œì¼œë²„ë¦°ë‹¤.  
ë°˜ëŒ€ë¡œ pì¸ íŽ˜ì´ì§€ ë„˜ë²„ëŠ” page tableë‚´ë¶€ì—ì„œ frame numberì™€ ë§¤ì¹˜ì‹œí‚¤ê¸° ìœ„í•´ì„œ ì‚¬ìš©ë˜ëŠ”ë° pâ†’f ì˜ ì—­í• ì„ í•˜ë“œì›¨ì–´ì˜ ì§€ì›ì„ ë°›ì•„ì„œ ìˆ˜í–‰ëœë‹¤.

### íŽ˜ì´ì§€ í…Œì´ë¸”

íŽ˜ì´ì§€ ë²ˆí˜¸ì™€ í”„ë ˆìž„ ë„˜ë²„ë¥¼ ë§¤ì¹˜ì‹œì¼œì£¼ëŠ” êµ¬ì¡°ë¥¼ íŽ˜ì´ì§€ í…Œì´ë¸”(Page Table)ì´ë¼ê³  í•˜ëŠ”ë° , **ë©”ëª¨ë¦¬ ì•ˆì— ì €ìž¥ëœë‹¤.**

ê·¸ë ‡ê¸°ë•Œë¬¸ì— ì‹¤ì œë¡œ ì–´ë– í•œ ë©”ëª¨ë¦¬ì— ì ‘ê·¼í• ë•ŒëŠ” **ë‘ ë²ˆì˜ ë©”ëª¨ë¦¬ ì ‘ê·¼**ì´ í•„ìš”í•˜ë‹¤.

1. ë©”ëª¨ë¦¬ì— ìžˆëŠ” íŽ˜ì´ì§€ í…Œì´ë¸” ì ‘ê·¼
2. ë³€í™˜ëœ ë¬¼ë¦¬ì  ì£¼ì†Œì— ê°€ì„œ ë©”ëª¨ë¦¬ ì ‘ê·¼

ì´ ë©”ëª¨ë¦¬ ì ‘ê·¼ì€ ê½¤ ë¹„ìš©ì´ í° ìž‘ì—…ì´ê¸° ë•Œë¬¸ì— **TLB**ë¼ëŠ” ìƒˆë¡œìš´ í•˜ë“œì›¨ì–´ ìºì‹œê°€ ì“°ì¸ë‹¤. 

### TLB

TLBëŠ” Associative Memoryë¼ê³ ë„ ë¶ˆë¦¬ëŠ” í•˜ë“œì›¨ì–´ ìºì‹œì¸ë°, ë…¼ë¦¬ì£¼ì†Œë¥¼ ë¬¼ë¦¬ì£¼ì†Œë¡œ ë³€í™˜í• ë•Œ ë©”ëª¨ë¦¬ì ‘ê·¼ì„ ì¤„ì´ê¸° ìœ„í•´ì„œ ì‚¬ìš©ëœë‹¤.

íŽ˜ì´ì§€í…Œì´ë¸”ê³¼ ìœ ì‚¬í•˜ê²Œ íŽ˜ì´ì§€ ë²ˆí˜¸ì™€ í”„ë ˆìž„ ë²ˆí˜¸ê°€ ëŒ€ì‘ë˜ê²Œ ê¸°ë¡ë˜ì–´ ìžˆë‹¤.  
ë‹¤ë§Œ, **ëª¨ë“  íŽ˜ì´ì§€ ë²ˆí˜¸ê°€ TLB ì•ˆì— ìžˆëŠ” ê²ƒì€ ì•„ë‹ˆë‹¤.**

ë¬¼ë¡  ì´ ë ˆì½”ë“œë“¤ì„ ë‹¤ ìˆœì°¨ì ìœ¼ë¡œ ì½ëŠ”ê²ƒì€ ì•„ë‹ˆê³ , **í•˜ë“œì›¨ì–´ì˜ ì§€ì›ì„ ë°›ì•„ ë³‘ë ¬ì ìœ¼ë¡œ ì½ê¸° ë•Œë¬¸ì— ë§¤ìš° ë¹ ë¥´ë‹¤.**  

>ì´ì— ê´€í•´ì„œ ì¢‹ì€ ë‹µë³€ì´ ìžˆì–´ì„œ ê³µìœ í•œë‹¤. [How does a TLB lookup compare all keys simultaneously?](https://cs.stackexchange.com/questions/119744/>how-does-a-tlb-lookup-compare-all-keys-simultaneously)

>ìš”ì•…í•˜ìžë©´ ë‹¨ì¼ CPU ì•ˆì—ì„œë¼ë„ íŒŒì´í”„ë¼ì´ë‹ ê¸°ë²•ì„ ì´ìš©í•´ì„œ ë³‘ë ¬ì ìœ¼ë¡œ ì½ëŠ”ë‹¤ëŠ” ê²ƒ. (ì»´í“¨í„°êµ¬ì¡° ìˆ˜ì—…ì„ ì°¸ê³ í•˜ìž.)

![Untitled](./7.png)

TLBê°€ ë„ìž…ë˜ë©´ì„œ (p,d)ì˜ ë…¼ë¦¬ì£¼ì†Œë¥¼ ë¬¼ë¦¬ì  ì£¼ì†Œë¡œ ë³€í™˜í•˜ëŠ” ë°©ë²•ì´ ë³€í–ˆë‹¤.

1. **TLBë¥¼ ë¨¼ì € í™•ì¸**í•´ì„œ pì— í•´ë‹¹í•˜ëŠ” í”„ë ˆìž„ ë²ˆí˜¸ê°€ ìžˆëŠ”ì§€ ì°¾ëŠ”ë‹¤.
    1. ìžˆë‹¤ë©´, **í”„ë ˆìž„ ë„˜ë²„ fì™€ ì˜¤í”„ì…‹ dë¥¼ ê°€ì§€ê³  ë°”ë¡œ ë©”ëª¨ë¦¬ì— ì ‘ê·¼í•œë‹¤.**
    2. ì—†ë‹¤ë©´ 2ë²ˆìœ¼ë¡œ ê°„ë‹¤.
2. **ë©”ëª¨ë¦¬**ì— ìžˆëŠ” **íŽ˜ì´ì§€ í…Œì´ë¸”ì„ í™•ì¸**í•œë‹¤.
3. íŽ˜ì´ì§€ í…Œì´ë¸”ì— ì ížŒ **í”„ë ˆìž„ ë„˜ë²„ fì™€ ì˜¤í”„ì…‹ dë¥¼ ê°€ì§€ê³  ë©”ëª¨ë¦¬ì— ì ‘ê·¼í•œë‹¤.**
4. **ê°€ìž¥ ìµœê·¼ì— ì‚¬ìš©ëœ (p,d)â†’(f,d) ë¥¼ TLBì— ì €ìž¥í•œë‹¤.**

1,4ë²ˆ ë•Œë¬¸ì— TLBëŠ” ë…¼ë¦¬ì â†’ë¬¼ë¦¬ì  ì£¼ì†Œ ë³€í™˜ì—ì„œ **ìºì‹œ ì—­í• **ì„ ìˆ˜í–‰í•œë‹¤ê³  ë³¼ ìˆ˜ ìžˆë‹¤.

![Untitled](/8.png)

>ðŸ’¡ ë‹¤ë§Œ ì¼ë°˜ì ì¸ CPU ìºì‹œ(L1,L2...)ì™€ëŠ” ëª©ì  ìžì²´ê°€ ë‹¤ë¥´ë‹¤. TLBëŠ” ì£¼ì†Œ ë³€í™˜ ì†ë„ í–¥ìƒì„ ìœ„í•œê²ƒì´ì–´ì„œ MMUì— ì˜í•œ ì£¼ì†Œë³€í™˜ì‹œì— ìƒê¸°ê³  , CPU ìºì‹œëŠ” ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¬ë•Œ ë©”ì¸ ë©”ëª¨ë¦¬ ì ‘ê·¼ì„ ì¤„ì´ê¸° ìœ„í•˜ì—¬ ë©”ì¸ ë©”ëª¨ë¦¬ ì ‘ê·¼ì‹œì ì— ì°¸ì¡°ëœë‹¤.
>ë¬¼ë¡  ë‘˜ ë‹¤ ë©”ì¸ ë©”ëª¨ë¦¬ ì ‘ê·¼ì„ ì¤„ì´ê¸° ìœ„í•¨ì´ë¼ëŠ” ì ì€ ë¹„ìŠ·í•˜ë‹¤.

>A cache stores a memory location temporarily while a TLB is like a cache that stores address translation (virtual to physical address)

**ë‹¨ ì´ TLBë„ ì»¨í…ìŠ¤íŠ¸ ìŠ¤ìœ„ì¹­ì´ ì¼ì–´ë‚ ë•Œ ë¹„ì›Œì§„ë‹¤.**  

ê·¸ ì´ìœ ëŠ” ìƒˆë¡œìš´ í”„ë¡œì„¸ìŠ¤ê°€ CPUë¥¼ í• ë‹¹ë°›ê²Œ ë˜ë©´, ë‹¤ë¥¸ ë©”ëª¨ë¦¬ ì£¼ì†Œê³µê°„ì„ ì°¸ì¡°í• ê²ƒì´ê¸° ë•Œë¬¸ì´ë‹¤.  
ì´ë•Œë¬¸ì— ì»¨í…ìŠ¤íŠ¸ ìŠ¤ìœ„ì¹­ ì§í›„ TLB ë¯¸ìŠ¤ê°€ ì—°ì†ì ìœ¼ë¡œ ìƒê¸´ë‹¤.

### íŽ˜ì´ì§€ ì‚¬ì´ì¦ˆ
íŽ˜ì´ì§€ì˜ í¬ê¸°ì— ëŒ€í•´ì„œë„ ì–˜ê¸°í•´ë³´ìž.  
íŽ˜ì´ì§€ì˜ í¬ê¸°ë¥¼ ì •í•˜ë©´, íŽ˜ì´ì§€ í…Œì´ë¸”ì˜ í¬ê¸°ë„ ê²°ì •ë˜ë¯€ë¡œ ì ì ˆí•œ íŽ˜ì´ì§€ í¬ê¸° ì„ ì •ì´ ì¤‘ìš”í•˜ë‹¤.

ì—¬ê¸°ì„œ ë§í•˜ëŠ” **ì ì ˆí•œ**ì˜ ê¸°ì¤€ì´ ë­˜ê¹Œ?

>ë§Œì•½ ëª¨ë“  í”„ë¡œì„¸ìŠ¤ê°€ 4Kë§Œ ìš”êµ¬í•˜ëŠ”ë° íŽ˜ì´ì§€ ì‚¬ì´ì¦ˆê°€ 8Kë©´?

>ëª¨ë“  íŽ˜ì´ì§€ì— 4Kë§Œí¼ì˜ ë‚´ë¶€ íŒŒíŽ¸í™”ê°€ ìƒê¸°ëŠ” ê²ƒì´ë‹¤.

- ë§Œì•½ íŽ˜ì´ì§€ ì‚¬ì´ì¦ˆê°€ í¬ë‹¤ë©´?
    - íŽ˜ì´ì§€ í…Œì´ë¸”ì˜ í¬ê¸°ëŠ” ì¤„ì–´ë“ ë‹¤.
    - í•œ ê°œì˜ íŽ˜ì´ì§€ í…Œì´ë¸”ì•ˆì— ë“¤ì–´ìžˆëŠ” ë°ì´í„°ê°€ ë§Žìœ¼ë‹ˆ **ê³µê°„ ì§€ì—­ì„±**ì„ ìž˜ ë§Œì¡±í•œë‹¤. 
    - í•œ ë²ˆì— ë§Žì€ ì–‘ì˜ ë°ì´í„°ë¥¼ ë””ìŠ¤í¬ì—ì„œ ê°€ì ¸ì˜¤ë‹ˆ **I/O ìž‘ì—…ì´ ì¤„ì–´ë“ ë‹¤.**
    - **ë‚´ë¶€ íŒŒíŽ¸í™”** ë¬¸ì œê°€ ì¦ê°€í•œë‹¤.
    - í•„ìš”í•˜ì§€ ì•Šì€ ë°ì´í„°ê°€ ë©”ëª¨ë¦¬ì— ì˜¬ë¼ì˜¬ ìˆ˜ ìžˆë‹¤.
    
- ë§Œì•½ íŽ˜ì´ì§€ ì‚¬ì´ì¦ˆë¥¼ ìž‘ë‹¤ë©´? 
    - ë‚´ë¶€ íŒŒíŽ¸í™” ë¬¸ì œê°€ ê°ì†Œí•œë‹¤.
    - í•„ìš”í•œ ë°ì´í„°ë§Œ ë©”ëª¨ë¦¬ì— ê°€ì ¸ì˜¬ ìˆ˜ ìžˆë‹¤.
    - **ê³µê°„ ì§€ì—­ì„±**ì„ ì§€í‚¤ê¸° ì–´ë ¤ì›Œ íŽ˜ì´ì§€ í´íŠ¸ ë°œìƒ í™•ë¥ ì´ ëŠ˜ì–´ë‚œë‹¤.
    - íŽ˜ì´ì§€ í…Œì´ë¸” ë‚´ì˜ ì—”íŠ¸ë¦¬ê°€ ë§Žì•„ì§€ë‹ˆ íŽ˜ì´ì§€ í…Œì´ë¸”ì˜ í¬ê¸°ê°€ ì»¤ì§„ë‹¤. **ì˜¤ë²„í—¤ë“œê°€ ë°œìƒí•œë‹¤.**

ë”°ë¼ì„œ ì—¬ëŸ¬ê°€ì§€ íŠ¸ë ˆì´ë“œ ì˜¤í”„ë¥¼ ê³ ë ¤í•´ì„œ íŽ˜ì´ì§€ì˜ í¬ê¸°ë¥¼ ì •í•˜ëŠ” ê²ƒì´ ì¤‘ìš”í•œë°,  
ì¼ë°˜ì ìœ¼ë¡œ ë©”ëª¨ë¦¬ í¬ê¸°ë„ ì»¤ì§€ê³ , í”„ë¡œì„¸ìŠ¤ í¬ê¸°ë„ ì»¤ì ¸ì„œ íŽ˜ì´ì§€ ì‚¬ì´ì¦ˆì˜ í¬ê¸°ë„ ì»¤ì§€ê³  ìžˆë‹¤.

ë¦¬ëˆ…ìŠ¤ 16.04 ê¸°ì¤€ ì•„ëž˜ì™€ ê°™ì€ ëª…ë ¹ì–´ë¡œ íŽ˜ì´ì§€ ì‚¬ì´ì¦ˆë¥¼ ì•Œ ìˆ˜ ìžˆëŠ”ë° 4096ìœ¼ë¡œ 4Kë‹¤.
```C
$ getconf PAGESIZE
> 4096
```

```toc
```