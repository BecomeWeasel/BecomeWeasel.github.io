{
    "componentChunkName": "component---src-templates-blog-template-js",
    "path": "/programmers-flip-card/",
    "result": {"data":{"cur":{"id":"4e6a1170-476e-559b-8a85-e77e76d47c21","html":"<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 100%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAsTAAALEwEAmpwYAAAD9klEQVQ4y22VyW4jVRSG8wq8AK/AY7BCbNghsWLLkg0bQCCxZdViwSDUoEZqmlbTSXdIGjtxOnHitOfyUK559FyDXWU73RIfutckBNGLW1X33PJf5//Pf453lksPsVarkDSxGA27rNcheR6wWLjMZoY8yzJfrvF4IN8X5+tVyGQyYJE6rPJAxnfEZbH0SBKHcGLTM3qkC484tiWY73dIU4c4tmTMsprM5yZRbJOkLrrVYjTR5e8l4GoVkKYuuxcaR8+POCveZ+9Sp9VrMBn3GY1UPE9B12vyeThSmY77vGg3+f3S5HnD5LBm8WetR5ra7MSRiW23eKZMMO6/z/y7NynW+xiBw9UmuKEuqK3XQ5aZz6urkI5jU6raeE8e0z4qU+r6JInNTjQ3MK0mh80At/g5WeEDClUF3bfZrLa6CToiO8FGyHO1DlAsk1LdJa6/QG9rHCsOqQCUlBcue80Rl81zmrU/2O/MUK0+2dKRYPO5QRB0ZaZCx3zp0NJU9hpDKoOQUn9CoWluAQWleG6yv3vMo2KFh8Uy+3untNtVpjNNZibADKMuaQ+HfXlXtQaq2UdzNHRXp6e1t5SzzGM6HlB8YfPg20+598W7FC8NTFfjahP+T0MhgbiLvWCwWQfyvelksAUUF8tqUHTWPP7mSx58/DYFI8XwjH80DG5pGN54VuxjaRWfLA9k9SVgvgpJZjoHJyqPdn/lwU9fcXAyQB0oZJn7Wg2F5mHQIYkN8sxjlbmyIZIbDWOb+ukxiq7RtizalTJqv8pk+noNp9MB7X6TsqJSUdpUugMuO50toKAwj0xmkcHLq1BaIl/5Eky0oKD3Xw0DXm4Cuo7LbsXgx8/e4eFvdzkZRDLjHdFGmlZlPNZYLH0WC48osmQmogDig4LB9V501Tr36FgmB02XXz58i72f73BqRCSRIaq8dfhsOuDVRmToS59dZySHxsKVNEWHrFcef7306dkW+60pD+98xNPDJ5TUGUlsCg19mUG105LtpNg2LU34bKuZ0DAMurT7DRTLoWU6dG2H81aLckfjXFG46A6odG4XJXHYq9qcVQbUTqo8qfmolip9Js6SSKPcdymUL+jdfY+jk0PO+j7LWIwyl/x2laPIRNVqHHcCzEKBycFjTusmum+yWQUss4A8NaiYMxpH37P54Q06R19zbkRkqSF9KJIaXfswW3pMpgZPGx6KNsK1Ap51phieLjsgy0Pypc2lHnBSa5JdfMJZvcrFIJDxPA+l1mLw3lAWg1KMrJJiUVIMik1D9qZoJ9EBgo7w2ZHicH7xjOO2TUXpyLjITIC5blsO4p3rvwAxHMUXxEqTf59vLxGPF8PXngsw4Zi/AdfKofJBX3IcAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"flip card\"\n        title=\"flip card\"\n        src=\"/static/fe5be793a2992a9d9bc5375d6e62fc78/37523/flip-card.png\"\n        srcset=\"/static/fe5be793a2992a9d9bc5375d6e62fc78/e9ff0/flip-card.png 180w,\n/static/fe5be793a2992a9d9bc5375d6e62fc78/f21e7/flip-card.png 360w,\n/static/fe5be793a2992a9d9bc5375d6e62fc78/37523/flip-card.png 720w,\n/static/fe5be793a2992a9d9bc5375d6e62fc78/00d43/flip-card.png 1000w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<blockquote>\n<p>정답률 0.95퍼의 무시무시한 문제다.</p>\n</blockquote>\n<p><img src=\"https://images.velog.io/images/hsw0194/post/25d9a099-6e25-45aa-8957-69cfbf016a77/image.png\" alt=\"\"></p>\n<h3 id=\"문제-제목\" style=\"position:relative;\"><a href=\"#%EB%AC%B8%EC%A0%9C-%EC%A0%9C%EB%AA%A9\" aria-label=\"문제 제목 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>문제 제목</h3>\n<p><a href=\"https://programmers.co.kr/learn/courses/30/lessons/72415\">카드 짝 맞추기</a></p>\n<h3 id=\"문제-설명\" style=\"position:relative;\"><a href=\"#%EB%AC%B8%EC%A0%9C-%EC%84%A4%EB%AA%85\" aria-label=\"문제 설명 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>문제 설명</h3>\n<p><img src=\"https://images.velog.io/images/hsw0194/post/4cee4e7d-32a9-4b13-ba08-ddcc321af803/image.png\" alt=\"\">\r\n게임 개발자인 베로니는 개발 연습을 위해 다음과 같은 간단한 카드 짝맞추기 보드 게임을 개발해 보려고 합니다.\r\n게임이 시작되면 화면에는 카드 16장이 뒷면을 위로하여 4 x 4 크기의 격자 형태로 표시되어 있습니다. 각 카드의 앞면에는 카카오프렌즈 캐릭터 그림이 그려져 있으며, 8가지의 캐릭터 그림이 그려진 카드가 각기 2장씩 화면에 무작위로 배치되어 있습니다.\r\n유저가 카드를 2장 선택하여 앞면으로 뒤집었을 때 같은 그림이 그려진 카드면 해당 카드는 게임 화면에서 사라지며, 같은 그림이 아니라면 원래 상태로 뒷면이 보이도록 뒤집힙니다. 이와 같은 방법으로 모든 카드를 화면에서 사라지게 하면 게임이 종료됩니다.</p>\n<p>게임에서 카드를 선택하는 방법은 다음과 같습니다.</p>\n<ul>\n<li>카드는 커서를 이용해서 선택할 수 있습니다.</li>\n</ul>\n<p>커서는 4 x 4 화면에서 유저가 선택한 현재 위치를 표시하는 “굵고 빨간 테두리 상자”를 의미합니다.</p>\n<ul>\n<li>커서는 [Ctrl] 키와 방향키에 의해 이동되며 키 조작법은 다음과 같습니다.</li>\n</ul>\n<p>방향키 ←, ↑, ↓, → 중 하나를 누르면, 커서가 누른 키 방향으로 1칸 이동합니다.\r\n[Ctrl] 키를 누른 상태에서 방향키 ←, ↑, ↓, → 중 하나를 누르면, 누른 키 방향에 있는 가장 가까운 카드로 한번에 이동합니다.\r\n만약, 해당 방향에 카드가 하나도 없다면 그 방향의 가장 마지막 칸으로 이동합니다.\r\n만약, 누른 키 방향으로 이동 가능한 카드 또는 빈 공간이 없어 이동할 수 없다면 커서는 움직이지 않습니다.</p>\n<ul>\n<li>커서가 위치한 카드를 뒤집기 위해서는 [Enter] 키를 입력합니다.</li>\n</ul>\n<p>[Enter] 키를 입력해서 카드를 뒤집었을 때 앞면이 보이는 카드가 1장 뿐이라면 그림을 맞출 수 없으므로 두번째 카드를 뒤집을 때 까지 앞면을 유지합니다.\r\n앞면이 보이는 카드가 2장이 된 경우, 두개의 카드에 그려진 그림이 같으면 해당 카드들이 화면에서 사라지며, 그림이 다르다면 두 카드 모두 뒷면이 보이도록 다시 뒤집힙니다.\r\n“베로니”는 게임 진행 중 카드의 짝을 맞춰 몇 장 제거된 상태에서 카드 앞면의 그림을 알고 있다면, 남은 카드를 모두 제거하는데 필요한 키 조작 횟수의 최솟값을 구해 보려고 합니다. 키 조작 횟수는 방향키와 [Enter] 키를 누르는 동작을 각각 조작 횟수 1로 계산하며, [Ctrl] 키와 방향키를 함께 누르는 동작 또한 조작 횟수 1로 계산합니다.</p>\n<p>다음은 카드가 몇 장 제거된 상태의 게임 화면에서 커서를 이동하는 예시입니다.\r\n아래 그림에서 빈 칸은 이미 카드가 제거되어 없어진 칸을 의미하며, 그림이 그려진 칸은 카드 앞 면에 그려진 그림을 나타냅니다.</p>\n<p><strong>&#x3C;예시는 생략하겠습니다.></strong></p>\n<h3 id=\"문제\" style=\"position:relative;\"><a href=\"#%EB%AC%B8%EC%A0%9C\" aria-label=\"문제 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>문제</h3>\n<p>현재 카드가 놓인 상태를 나타내는 2차원 배열 board와 커서의 처음 위치 r, c가 매개변수로 주어질 때, 모든 카드를 제거하기 위한 키 조작 횟수의 최솟값을 return 하도록 solution 함수를 완성해 주세요.</p>\n<h3 id=\"제한-사항\" style=\"position:relative;\"><a href=\"#%EC%A0%9C%ED%95%9C-%EC%82%AC%ED%95%AD\" aria-label=\"제한 사항 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>제한 사항</h3>\n<ul>\n<li>board는 4 x 4 크기의 2차원 배열입니다.</li>\n<li>board 배열의 각 원소는 0 이상 6 이하인 자연수입니다.</li>\n<li>0은 카드가 제거된 빈 칸을 나타냅니다.</li>\n<li>1 부터 6까지의 자연수는 2개씩 들어있으며 같은 숫자는 같은 그림의 카드를 의미합니다.</li>\n<li>뒤집을 카드가 없는 경우(board의 모든 원소가 0인 경우)는 입력으로 주어지지 않습니다.</li>\n<li>r은 커서의 최초 세로(행) 위치를 의미합니다.</li>\n<li>c는 커서의 최초 가로(열) 위치를 의미합니다.</li>\n<li>r과 c는 0 이상 3 이하인 정수입니다.</li>\n<li>게임 화면의 좌측 상단이 (0, 0), 우측 하단이 (3, 3) 입니다.</li>\n</ul>\n<h3 id=\"예제-입출력\" style=\"position:relative;\"><a href=\"#%EC%98%88%EC%A0%9C-%EC%9E%85%EC%B6%9C%EB%A0%A5\" aria-label=\"예제 입출력 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>예제 입출력</h3>\n<p><strong>입력</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">board : [[1,0,0,3],[2,0,0,0],[0,0,0,2],[3,0,1,0]]\r\nr : 1\r\nc: 0\r\n\r\nboard : [[3,0,0,2],[0,0,1,0],[0,1,0,0],[2,0,0,3]]\t\r\nr : 0\r\nc: 1</code></pre></div>\n<p><strong>출력</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">14\r\n16</code></pre></div>\n<p><strong>입출력 예 #2</strong>\r\n<img src=\"https://images.velog.io/images/hsw0194/post/730572ca-24fa-4b44-ba6f-d6ad71c783e6/image.png\" alt=\"\"></p>\n<blockquote>\n<p>위 게임 화면에서 모든 카드를 제거하기 위한 키 조작 횟수의 최솟값은 16번 입니다.</p>\n</blockquote>\n<h3 id=\"풀이\" style=\"position:relative;\"><a href=\"#%ED%92%80%EC%9D%B4\" aria-label=\"풀이 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>풀이</h3>\n<p>문제를 읽으면서 <strong>이걸 도대체 어떻게?</strong> 라는 생각이 강하게 들었다. 그 이유는 아래와 같은데</p>\n<ol>\n<li><strong>제약조건</strong>이 너무 많다. ctrl 이동이나 카드를 뒤집는 행동에서 코너케이스가 분명히 나올것 같았다.</li>\n<li><strong>할 수 있는 행동</strong>이 너무 많다. 단순히 생각해보자. 커서를 기준으로 <code class=\"language-text\">←, ↑, ↓, →</code> 이동과 <code class=\"language-text\">ctrl + ←, ↑, ↓, →</code> (엑셀에서의 그것) , 카드를 첫번째로 뒤집는 것, 카드를 뒤집은 상태에서 다시 뒤집는 것. 정말 많다.</li>\n<li>카드가 다 보이는 상태인가? 아니면 뒤집어 봐야지 아는건가?</li>\n</ol>\n<h4 id=\"사고의-과정\" style=\"position:relative;\"><a href=\"#%EC%82%AC%EA%B3%A0%EC%9D%98-%EA%B3%BC%EC%A0%95\" aria-label=\"사고의 과정 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>사고의 과정</h4>\n<p>문제 독해를 다시 천천히 해보자. 그러면 아래와 같은 점때문에 <strong>풀 수 있어 보인다.</strong></p>\n<ol>\n<li>2차원 격자가 <code class=\"language-text\">4x4</code>, 16칸으로 매우 매우 작다. 완전탐색이 가능해보인다.</li>\n<li>모두 뒤집혔을때의 키 조작 횟수의 <strong>최솟값</strong>을 묻고 있다.</li>\n<li>변화하는 상태의 개수를 명확하게 알 수 있다.</li>\n</ol>\n<p>이쯤되면 한가지 풀이 밖에 없다. <strong>BFS다.</strong></p>\n<p>다만 구현할 부분이 매우 많은 BFS 풀이일뿐이다. 개인적인 생각으로 삼성 기출 문제를 열심히 공부하신 분들이라면 어렵지 않게 구현할 수 있을거라고 생각한다.</p>\n<blockquote>\n<p>저는 삼성 기출문제 공부를 잘 안했습니다.</p>\n</blockquote>\n<h4 id=\"커서를-기준으로-생각하자\" style=\"position:relative;\"><a href=\"#%EC%BB%A4%EC%84%9C%EB%A5%BC-%EA%B8%B0%EC%A4%80%EC%9C%BC%EB%A1%9C-%EC%83%9D%EA%B0%81%ED%95%98%EC%9E%90\" aria-label=\"커서를 기준으로 생각하자 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>커서를 기준으로 생각하자.</h4>\n<p>일단 커서의 위치를 기점으로 가능한 행동을 나눠보자.</p>\n<ol>\n<li>단순히 커서를 격자에서 벗어나지 않게 <code class=\"language-text\">상,하,좌,우</code>로 움직인다.</li>\n<li>격자에서 벗어나지 않게 <code class=\"language-text\">ctrl + 상,하,좌,우</code>로 움직인다.\n<ul>\n<li>카드가 있다면 카드로 이동한다.</li>\n<li>해당 방향에 카드가 없다면 맨 끝으로 이동한다.</li>\n</ul>\n</li>\n<li><code class=\"language-text\">Enter</code>를 눌러 카드를 뒤집는다.\n<ul>\n<li>이번이 처음 뒤집는 카드라면, 그 카드를 기록한다.</li>\n<li>이미 뒤집은 카드가 있다면, 그 카드와 지금 카드를 비교한다.\n<ol>\n<li>두 그림이 같으면 , 카드를 삭제한다.</li>\n<li>다르면 , 뒤집어진 카드를 다시 뒤집는다.</li>\n</ol>\n</li>\n</ul>\n</li>\n</ol>\n<p>정리해보면 생각보다 간단하다. 각각의 <strong>변화하는 상태</strong>를 그래프에서의 <strong>노드</strong>로 보고 위에서 적은 3가지 행동을 모두 하는 완전탐색을 수행한다. 이 과정에서 최소 횟수를 구하니 <strong>BFS</strong>다.</p>\n<h4 id=\"변화하는-상태\" style=\"position:relative;\"><a href=\"#%EB%B3%80%ED%99%94%ED%95%98%EB%8A%94-%EC%83%81%ED%83%9C\" aria-label=\"변화하는 상태 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>변화하는 상태</h4>\n<p>이제 생각할 건 하나다. 매 탐색마다 어떤것이 변화할까?</p>\n<p>일단 커서가 매번 움직이니, <strong>커서의 위치</strong>는 변한다. 또, 단순히 탐색하는것이 아니라 격자에 변화를 주기 때문에 <strong>격자의 상태</strong>가 변화한다.</p>\n<p><strong>여기까지는 일반적이다.</strong> 그럼 이 문제에서 특수한 상황은 카드를 뒤집는 행동이다.</p>\n<blockquote>\n</blockquote>\n<ul>\n<li>이번이 처음 뒤집는 카드라면, 그 카드를 기록한다.</li>\n<li>이미 뒤집은 카드가 있다면, 그 카드와 지금 카드를 비교한다.</li>\n</ul>\n<p>그러면 <strong>현재 카드를 뒤집었는지(False=0 or True=1장 뒤집었는지)</strong> 와 카드를 뒤집었다면 <strong>뒤집은 카드의 위치</strong> 역시 변한다.</p>\n<p>단순히 변한다고만 해서 기록해줘야 하는 것은 아니다. 기록해줘야 하는 조건은 <strong>특정 조건이 없을때</strong> 탐색을 생략한다거나 중복으로 탐색하게 된다면, 그 특정 조건은 필요한 것이다.</p>\n<p>예를 들어보자.\r\n<code class=\"language-text\">Enter</code> 행동은 카드를 뒤집는 행동이다. 카드를 뒤집는것을 기록을 해주지 않는다면, <code class=\"language-text\">visit</code> 배열 안에 뒤집기 전의 상태가 그대로 들어가 있기 때문에,  <code class=\"language-text\">Enter</code> 행동을 수행할 수 없다.</p>\n<blockquote>\n<p>중복적인 탐색을 방지하는게 visit의 역할이기 때문이다.</p>\n</blockquote>\n<p>정리하자면, 변화하는 상태는</p>\n<ol>\n<li>격자의 상태</li>\n<li>커서의 위치</li>\n<li>현재 카드를 0 or 1장 뒤집었는지</li>\n<li>카드를 뒤집었다면 뒤집은 카드의 위치\n<ul>\n<li>3번이 True면 뒤집은 카드의 위치</li>\n<li>3번이 False면 (-1,-1)</li>\n</ul>\n</li>\n</ol>\n<h4 id=\"구현-의사코드\" style=\"position:relative;\"><a href=\"#%EA%B5%AC%ED%98%84-%EC%9D%98%EC%82%AC%EC%BD%94%EB%93%9C\" aria-label=\"구현 의사코드 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>구현 의사코드</h4>\n<p>위에서 적은 <strong>커서의 움직임</strong>과 <strong>변화하는 상태</strong>를 기반으로 코드를 작성해보자.\r\n탐색 여부를 체크하는 <code class=\"language-text\">visit</code>은 변화하는 상태가 많기 때문에, 고차원 <code class=\"language-text\">list</code>로 구성하기가 곤란하다. <code class=\"language-text\">set</code>을 이용하되 복잡도에 유의하자.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">visit<span class=\"token operator\">=</span><span class=\"token builtin\">set</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\r\nq<span class=\"token operator\">=</span>deque<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\r\nvisit<span class=\"token punctuation\">.</span>add<span class=\"token punctuation\">(</span>초기격자의 상태<span class=\"token punctuation\">,</span>커서의 위치<span class=\"token punctuation\">,</span>카드를 뒤집지 않음<span class=\"token punctuation\">,</span><span class=\"token punctuation\">(</span><span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\r\nq<span class=\"token punctuation\">.</span>add<span class=\"token punctuation\">(</span>초기격자의 상태<span class=\"token punctuation\">,</span>커서의 위치<span class=\"token punctuation\">,</span>카드를 뒤집지 않음<span class=\"token punctuation\">,</span><span class=\"token punctuation\">(</span><span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>조작 횟수<span class=\"token punctuation\">)</span>\r\n\r\n<span class=\"token keyword\">while</span> q<span class=\"token punctuation\">:</span>\r\n\t보드의 상태<span class=\"token punctuation\">,</span>기존 커서의 위치<span class=\"token punctuation\">,</span>카드를 뒤집었는지<span class=\"token punctuation\">,</span>뒤집었다면 위치<span class=\"token punctuation\">,</span>횟수<span class=\"token operator\">=</span>q<span class=\"token punctuation\">.</span>popleft<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\r\n    \r\n    <span class=\"token keyword\">for</span> 상<span class=\"token punctuation\">,</span>하<span class=\"token punctuation\">,</span>좌<span class=\"token punctuation\">,</span>우 네 방향으로 <span class=\"token punctuation\">:</span>\r\n    \t새 커서 위치<span class=\"token operator\">=</span>방향별로 한칸 움직인 좌표<span class=\"token operator\">=</span>기존 커서의 위치<span class=\"token operator\">+</span><span class=\"token number\">1</span>\r\n        \r\n        <span class=\"token keyword\">if</span> 격자를 벗어났다면<span class=\"token punctuation\">:</span>\r\n        \t<span class=\"token keyword\">continue</span>\r\n        \r\n        <span class=\"token keyword\">if</span> 이전의 상태<span class=\"token punctuation\">,</span>새 커서 위치를 방문한적 있다면<span class=\"token punctuation\">:</span>\r\n        \t<span class=\"token keyword\">continue</span>\r\n        \r\n        이전의 상태<span class=\"token punctuation\">,</span>새 커서 위치를 방문으로 표시\r\n        이전의 상태<span class=\"token punctuation\">,</span>새 커서 위치<span class=\"token punctuation\">,</span>횟수<span class=\"token operator\">+</span><span class=\"token number\">1</span>를 다음에 탐색\r\n        \r\n    <span class=\"token keyword\">for</span> 상<span class=\"token punctuation\">,</span>하<span class=\"token punctuation\">,</span>좌<span class=\"token punctuation\">,</span>우 네 방향으로 ctrl 이동 <span class=\"token punctuation\">:</span>\r\n    \t<span class=\"token comment\"># 격자가 이렇고 C가 커서 일때 </span>\r\n        <span class=\"token comment\"># 0 0 0 0 </span>\r\n        <span class=\"token comment\"># 2 0 0 2 </span>\r\n        <span class=\"token comment\"># 0 0 0 0 </span>\r\n        <span class=\"token comment\"># 0 0 0 C </span>\r\n        <span class=\"token comment\"># 왼쪽으로 간다면 (0,3), 위로 간다면 (3,1)</span>\r\n    \t새 커서 위치<span class=\"token operator\">=</span><span class=\"token builtin\">min</span><span class=\"token punctuation\">(</span>기존 커서의 위치에서 방향별로 끝<span class=\"token punctuation\">,</span>존재하는 카드의 끝<span class=\"token punctuation\">)</span>\r\n        \r\n        <span class=\"token keyword\">if</span> 이전의 상태<span class=\"token punctuation\">,</span>새 커서 위치를 방문한적 있다면<span class=\"token punctuation\">:</span>\r\n        \t<span class=\"token keyword\">continue</span>\r\n        \r\n        이전의 상태<span class=\"token punctuation\">,</span>새 커서 위치를 방문으로 표시\r\n        이전의 상태<span class=\"token punctuation\">,</span>새 커서 위치<span class=\"token punctuation\">,</span>횟수<span class=\"token operator\">+</span><span class=\"token number\">1</span>를 다음에 탐색\r\n    \r\n    <span class=\"token comment\"># 현재 한장은 뒤집은 상태에서 다른것 뒤집으려 할때</span>\r\n    <span class=\"token keyword\">if</span> 현재 카드를 뒤집은 상태라면 <span class=\"token punctuation\">:</span>\r\n    \t<span class=\"token comment\"># 짝을 찾는데 성공</span>\r\n    \t<span class=\"token keyword\">if</span> 지금 위치의 카드와 이전에 뒤집었던 카드가 같다면<span class=\"token punctuation\">:</span>\r\n            격자에서 현재 카드 숫자를 제거함\r\n            \r\n            <span class=\"token keyword\">if</span> 지금 모든 카드를 제거했다면<span class=\"token punctuation\">:</span>\r\n            \t<span class=\"token keyword\">return</span> 횟수<span class=\"token operator\">+</span><span class=\"token number\">1</span>\r\n            <span class=\"token keyword\">else</span> 아직 끝낼수 없다면<span class=\"token punctuation\">:</span>\r\n            \t바뀐 격자의 상태<span class=\"token punctuation\">,</span>현재 커서위치<span class=\"token punctuation\">,</span>뒤집지 않음을 방문으로 표시\r\n                바뀐 격자의 상태<span class=\"token punctuation\">,</span>현재 커서위치<span class=\"token punctuation\">,</span>뒤집지 않음을 다음에 탐색                \t\t\r\n        <span class=\"token comment\"># 짝 맞추기 실패 </span>\r\n        <span class=\"token keyword\">else</span> 지금 위치의 카드와 이전에 뒤집었던 카드가 다르다면<span class=\"token punctuation\">:</span>\r\n            이전 상태<span class=\"token punctuation\">,</span>현재 커서의 위치<span class=\"token punctuation\">,</span>뒤집지 않음을 방문으로 표시\r\n            이전의 상태<span class=\"token punctuation\">,</span>현재 커서의 위치<span class=\"token punctuation\">,</span>카드를 뒤집음<span class=\"token punctuation\">,</span>횟수<span class=\"token operator\">+</span><span class=\"token number\">1</span>을 다음에 탐색\r\n        \r\n    <span class=\"token keyword\">else</span> 카드를 하나도 안 뒤집은 상태라면 <span class=\"token punctuation\">:</span>\r\n    \r\n    \t<span class=\"token keyword\">if</span> 이전의 상태<span class=\"token punctuation\">,</span>카드를 뒤집음<span class=\"token punctuation\">,</span>현재 커서의 위치를 방문한적 있다면<span class=\"token punctuation\">:</span>\r\n        \t<span class=\"token keyword\">continue</span>\r\n        \r\n        이전의 상태<span class=\"token punctuation\">,</span>현재 커서의 위치<span class=\"token punctuation\">,</span>카드를 뒤집음을 방문으로 표시\r\n        이전의 상태<span class=\"token punctuation\">,</span>현재 커서의 위치<span class=\"token punctuation\">,</span>카드를 뒤집음<span class=\"token punctuation\">,</span>횟수<span class=\"token operator\">+</span><span class=\"token number\">1</span>를 다음에 탐색\r\n</code></pre></div>\n<p>구현이 꽤 복잡하지만 하나씩 보면, 커서의 행동별로 분류해서 전혀 복잡하지 않다. 신경써줄 부분은 <code class=\"language-text\">ctrl+상,하,좌,우</code> 이동에서 가까운 카드 혹은 끝 부분을 찾는 방법과 카드를 뒤집은 상태에서 카드 짝을 맞췄는지 아닌지 파악하는 부분이다.</p>\n<h4 id=\"구현에서의-몇가지-팁\" style=\"position:relative;\"><a href=\"#%EA%B5%AC%ED%98%84%EC%97%90%EC%84%9C%EC%9D%98-%EB%AA%87%EA%B0%80%EC%A7%80-%ED%8C%81\" aria-label=\"구현에서의 몇가지 팁 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>구현에서의 몇가지 팁</h4>\n<p>다만 격자의 상태를 기록해야하는데, 탐색이 커지는 경우에는 매 탐색마다 <code class=\"language-text\">deque</code>에 <code class=\"language-text\">4x4</code> 격자를 넣기에는 메모리를 걱정해줘야할 수 있으니, <code class=\"language-text\">4x4</code> 격자를 직렬화하는 방식을 택했다.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">def</span> <span class=\"token function\">serialize</span><span class=\"token punctuation\">(</span>board<span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span><span class=\"token operator\">></span> <span class=\"token builtin\">str</span><span class=\"token punctuation\">:</span>\r\n\tret <span class=\"token operator\">=</span> <span class=\"token string\">''</span>\r\n        <span class=\"token keyword\">for</span> r <span class=\"token keyword\">in</span> board<span class=\"token punctuation\">:</span>\r\n            <span class=\"token keyword\">for</span> num <span class=\"token keyword\">in</span> r<span class=\"token punctuation\">:</span>\r\n                ret <span class=\"token operator\">+=</span> <span class=\"token builtin\">str</span><span class=\"token punctuation\">(</span>num<span class=\"token punctuation\">)</span>\r\n\r\n        <span class=\"token keyword\">return</span> ret</code></pre></div>\n<p>이 경우에는 2차원 좌표인 (x,y) 접근이 아니라 1차원 idx 접근으로 해야하기 때문에 (x,y) -> idx로 변환해주는 함수가 필요하다.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">def</span> <span class=\"token function\">idxConverter</span><span class=\"token punctuation\">(</span>y<span class=\"token punctuation\">:</span><span class=\"token builtin\">int</span><span class=\"token punctuation\">,</span> x<span class=\"token punctuation\">:</span><span class=\"token builtin\">int</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span><span class=\"token operator\">></span> <span class=\"token builtin\">int</span><span class=\"token punctuation\">:</span>\r\n        <span class=\"token keyword\">return</span> <span class=\"token number\">4</span> <span class=\"token operator\">*</span> y <span class=\"token operator\">+</span> x</code></pre></div>\n<p>이 경우에 훨씬 편리한점이 생기는데, 바로 카드를 제거할때 격자 안에 있는 요소를 변경하는 것이 아니라 <code class=\"language-text\">string.replace()</code> 함수를 사용할 수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"> <span class=\"token keyword\">def</span> <span class=\"token function\">switchTo0</span><span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">,</span>num<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\r\n        <span class=\"token keyword\">return</span> s<span class=\"token punctuation\">.</span>replace<span class=\"token punctuation\">(</span>num<span class=\"token punctuation\">,</span><span class=\"token string\">'0'</span><span class=\"token punctuation\">)</span></code></pre></div>\n<h4 id=\"해설과는-다른-풀이입니다\" style=\"position:relative;\"><a href=\"#%ED%95%B4%EC%84%A4%EA%B3%BC%EB%8A%94-%EB%8B%A4%EB%A5%B8-%ED%92%80%EC%9D%B4%EC%9E%85%EB%8B%88%EB%8B%A4\" aria-label=\"해설과는 다른 풀이입니다 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>해설과는 다른 풀이입니다.</h4>\n<p><a href=\"https://tech.kakao.com/2021/01/25/2021-kakao-recruitment-round-1/\">2021 카카오 신입공채 문제해설</a>의 6번 풀이를 보면 카드별로 지우는 순서를 순열로 정하고 순서대로 최단거리를 수행 후 최단거리의 합 중에서의 최소를 구하는데, 음.. 개인적인 생각으로 해설이 항상 직관적이고 최적의 해를 제공하지는 않는 것 같다.</p>\n<p>단적으로 내가 작성한 코드는 모든 테스트 케이스에 소요시간이 200ms를 넘지 않는데 순열을 이용한 코드는 3000ms도 소요될때가 있다. 물론 이 문제는 효율성까지 검사하는 문제는 아니다.</p>\n<p>지워야하는 순서를 순열을 통해서 정하고,최소횟수를 구하는 방법보다 처음부터 최소횟수를 완전탐색으로 구현하는것이 알고리즘 초보 입장에서 더 구현하기 쉬워보이고 와닿는다.</p>\n<blockquote>\n<p>이 과정에서 (1,1)에 있는 1번 카드와 (2,2)에 있는 1번 카드는 서로 다른 순서로 인식해야 한다.</p>\n</blockquote>\n<h3 id=\"풀이코드\" style=\"position:relative;\"><a href=\"#%ED%92%80%EC%9D%B4%EC%BD%94%EB%93%9C\" aria-label=\"풀이코드 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>풀이코드</h3>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">from</span> collections <span class=\"token keyword\">import</span> deque\r\n\r\ndy <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">]</span>\r\ndx <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span>\r\n\r\n\r\n<span class=\"token keyword\">def</span> <span class=\"token function\">solution</span><span class=\"token punctuation\">(</span>board<span class=\"token punctuation\">,</span> r<span class=\"token punctuation\">,</span> c<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\r\n    <span class=\"token keyword\">def</span> <span class=\"token function\">isEnd</span><span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span><span class=\"token operator\">></span> <span class=\"token builtin\">bool</span><span class=\"token punctuation\">:</span>\r\n        <span class=\"token keyword\">for</span> c <span class=\"token keyword\">in</span> s<span class=\"token punctuation\">:</span>\r\n            <span class=\"token keyword\">if</span> c <span class=\"token operator\">!=</span> <span class=\"token string\">'0'</span><span class=\"token punctuation\">:</span>\r\n                <span class=\"token keyword\">return</span> <span class=\"token boolean\">False</span>\r\n        <span class=\"token keyword\">return</span> <span class=\"token boolean\">True</span>\r\n\r\n    <span class=\"token keyword\">def</span> <span class=\"token function\">OOB</span><span class=\"token punctuation\">(</span>y<span class=\"token punctuation\">,</span> x<span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span><span class=\"token operator\">></span> <span class=\"token builtin\">bool</span><span class=\"token punctuation\">:</span>\r\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">not</span> <span class=\"token number\">0</span> <span class=\"token operator\">&lt;=</span> y <span class=\"token operator\">&lt;</span> <span class=\"token number\">4</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">or</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">not</span> <span class=\"token number\">0</span> <span class=\"token operator\">&lt;=</span> x <span class=\"token operator\">&lt;</span> <span class=\"token number\">4</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\r\n            <span class=\"token keyword\">return</span> <span class=\"token boolean\">True</span>\r\n        <span class=\"token keyword\">return</span> <span class=\"token boolean\">False</span>\r\n\r\n    <span class=\"token keyword\">def</span> <span class=\"token function\">isOnEdgeByDirection</span><span class=\"token punctuation\">(</span>y<span class=\"token punctuation\">,</span> x<span class=\"token punctuation\">,</span> d<span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span><span class=\"token operator\">></span> <span class=\"token builtin\">bool</span><span class=\"token punctuation\">:</span>\r\n\r\n        <span class=\"token keyword\">if</span> d <span class=\"token operator\">==</span> <span class=\"token number\">0</span><span class=\"token punctuation\">:</span>\r\n            <span class=\"token keyword\">if</span> y <span class=\"token operator\">==</span> <span class=\"token number\">0</span><span class=\"token punctuation\">:</span>\r\n                <span class=\"token keyword\">return</span> <span class=\"token boolean\">True</span>\r\n        <span class=\"token keyword\">elif</span> d <span class=\"token operator\">==</span> <span class=\"token number\">1</span><span class=\"token punctuation\">:</span>\r\n            <span class=\"token keyword\">if</span> y <span class=\"token operator\">==</span> <span class=\"token number\">3</span><span class=\"token punctuation\">:</span>\r\n                <span class=\"token keyword\">return</span> <span class=\"token boolean\">True</span>\r\n        <span class=\"token keyword\">elif</span> d <span class=\"token operator\">==</span> <span class=\"token number\">2</span><span class=\"token punctuation\">:</span>\r\n            <span class=\"token keyword\">if</span> x <span class=\"token operator\">==</span> <span class=\"token number\">0</span><span class=\"token punctuation\">:</span>\r\n                <span class=\"token keyword\">return</span> <span class=\"token boolean\">True</span>\r\n        <span class=\"token keyword\">elif</span> d <span class=\"token operator\">==</span> <span class=\"token number\">3</span><span class=\"token punctuation\">:</span>\r\n            <span class=\"token keyword\">if</span> x <span class=\"token operator\">==</span> <span class=\"token number\">3</span><span class=\"token punctuation\">:</span>\r\n                <span class=\"token keyword\">return</span> <span class=\"token boolean\">True</span>\r\n        <span class=\"token keyword\">return</span> <span class=\"token boolean\">False</span>\r\n\r\n    <span class=\"token comment\"># 바뀌는 상황 :</span>\r\n    <span class=\"token comment\"># 카드판의 상황,현재 커서의 위치 , 현재 뒤집었는지? 아니면 안뒤집엇는지 ( 2장째 기다리는중인지 뒤집었다면 커서 위치)</span>\r\n\r\n    <span class=\"token comment\"># 구하는 것 : 최소 회수 이동</span>\r\n\r\n    <span class=\"token keyword\">def</span> <span class=\"token function\">serialize</span><span class=\"token punctuation\">(</span>board<span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span><span class=\"token operator\">></span> <span class=\"token builtin\">str</span><span class=\"token punctuation\">:</span>\r\n        ret <span class=\"token operator\">=</span> <span class=\"token string\">''</span>\r\n        <span class=\"token keyword\">for</span> r <span class=\"token keyword\">in</span> board<span class=\"token punctuation\">:</span>\r\n            <span class=\"token keyword\">for</span> num <span class=\"token keyword\">in</span> r<span class=\"token punctuation\">:</span>\r\n                ret <span class=\"token operator\">+=</span> <span class=\"token builtin\">str</span><span class=\"token punctuation\">(</span>num<span class=\"token punctuation\">)</span>\r\n\r\n        <span class=\"token keyword\">return</span> ret\r\n\r\n    <span class=\"token keyword\">def</span> <span class=\"token function\">switchTo0</span><span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">:</span><span class=\"token builtin\">str</span><span class=\"token punctuation\">,</span>num<span class=\"token punctuation\">:</span><span class=\"token builtin\">str</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span><span class=\"token operator\">></span> <span class=\"token builtin\">int</span><span class=\"token punctuation\">:</span>\r\n\r\n        <span class=\"token keyword\">return</span> s<span class=\"token punctuation\">.</span>replace<span class=\"token punctuation\">(</span>num<span class=\"token punctuation\">,</span><span class=\"token string\">'0'</span><span class=\"token punctuation\">)</span>\r\n\r\n    <span class=\"token keyword\">def</span> <span class=\"token function\">idxConverter</span><span class=\"token punctuation\">(</span>y<span class=\"token punctuation\">,</span> x<span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span><span class=\"token operator\">></span> <span class=\"token builtin\">int</span><span class=\"token punctuation\">:</span>\r\n        <span class=\"token keyword\">return</span> <span class=\"token number\">4</span> <span class=\"token operator\">*</span> y <span class=\"token operator\">+</span> x\r\n\r\n    visit <span class=\"token operator\">=</span> <span class=\"token builtin\">set</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\r\n\r\n    <span class=\"token comment\"># 보드의 상태 ,커서의 위치 , 커서가 카드를 뒤집었는지 , 뒤집힌 카드가 있다면 그 위치</span>\r\n    visit<span class=\"token punctuation\">.</span>add<span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>serialize<span class=\"token punctuation\">(</span>board<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span>r<span class=\"token punctuation\">,</span> c<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token boolean\">False</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\r\n    q <span class=\"token operator\">=</span> deque<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\r\n    q<span class=\"token punctuation\">.</span>append<span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>serialize<span class=\"token punctuation\">(</span>board<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> r<span class=\"token punctuation\">,</span> c<span class=\"token punctuation\">,</span> <span class=\"token boolean\">False</span><span class=\"token punctuation\">,</span> <span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\r\n\r\n    <span class=\"token keyword\">while</span> q<span class=\"token punctuation\">:</span>\r\n        b<span class=\"token punctuation\">,</span> y<span class=\"token punctuation\">,</span> x<span class=\"token punctuation\">,</span> isFlipped<span class=\"token punctuation\">,</span> f_y<span class=\"token punctuation\">,</span> f_x<span class=\"token punctuation\">,</span> count <span class=\"token operator\">=</span> q<span class=\"token punctuation\">.</span>popleft<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\r\n\r\n        <span class=\"token comment\"># 모든 카드를 뒤집었는지</span>\r\n        <span class=\"token comment\"># 여기서 체크하면 시간 더걸림</span>\r\n        <span class=\"token comment\"># if isEnd(b):</span>\r\n        <span class=\"token comment\">#     return count</span>\r\n\r\n        <span class=\"token keyword\">for</span> k <span class=\"token keyword\">in</span> <span class=\"token builtin\">range</span><span class=\"token punctuation\">(</span><span class=\"token number\">4</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\r\n            ny<span class=\"token punctuation\">,</span> nx <span class=\"token operator\">=</span> y <span class=\"token operator\">+</span> dy<span class=\"token punctuation\">[</span>k<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> x <span class=\"token operator\">+</span> dx<span class=\"token punctuation\">[</span>k<span class=\"token punctuation\">]</span>\r\n\r\n            <span class=\"token keyword\">if</span> OOB<span class=\"token punctuation\">(</span>ny<span class=\"token punctuation\">,</span> nx<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\r\n                <span class=\"token keyword\">continue</span>\r\n\r\n            <span class=\"token keyword\">while</span> b<span class=\"token punctuation\">[</span>idxConverter<span class=\"token punctuation\">(</span>ny<span class=\"token punctuation\">,</span> nx<span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">==</span> <span class=\"token string\">'0'</span> <span class=\"token keyword\">and</span> <span class=\"token keyword\">not</span> isOnEdgeByDirection<span class=\"token punctuation\">(</span>ny<span class=\"token punctuation\">,</span> nx<span class=\"token punctuation\">,</span> k<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\r\n                ny<span class=\"token punctuation\">,</span> nx <span class=\"token operator\">=</span> ny <span class=\"token operator\">+</span> dy<span class=\"token punctuation\">[</span>k<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> nx <span class=\"token operator\">+</span> dx<span class=\"token punctuation\">[</span>k<span class=\"token punctuation\">]</span>\r\n\r\n            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>b<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span>ny<span class=\"token punctuation\">,</span> nx<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> isFlipped<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span>f_y<span class=\"token punctuation\">,</span> f_x<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">in</span> visit<span class=\"token punctuation\">:</span>\r\n                <span class=\"token keyword\">continue</span>\r\n\r\n            visit<span class=\"token punctuation\">.</span>add<span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>b<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span>ny<span class=\"token punctuation\">,</span> nx<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> isFlipped<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span>f_y<span class=\"token punctuation\">,</span> f_x<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\r\n            q<span class=\"token punctuation\">.</span>append<span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>b<span class=\"token punctuation\">,</span> ny<span class=\"token punctuation\">,</span> nx<span class=\"token punctuation\">,</span> isFlipped<span class=\"token punctuation\">,</span> f_y<span class=\"token punctuation\">,</span> f_x<span class=\"token punctuation\">,</span> count <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\r\n\r\n        <span class=\"token comment\"># 상하좌우 네방향 이동</span>\r\n\r\n        <span class=\"token keyword\">for</span> k <span class=\"token keyword\">in</span> <span class=\"token builtin\">range</span><span class=\"token punctuation\">(</span><span class=\"token number\">4</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\r\n            ny<span class=\"token punctuation\">,</span> nx <span class=\"token operator\">=</span> y <span class=\"token operator\">+</span> dy<span class=\"token punctuation\">[</span>k<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> x <span class=\"token operator\">+</span> dx<span class=\"token punctuation\">[</span>k<span class=\"token punctuation\">]</span>\r\n\r\n            <span class=\"token keyword\">if</span> OOB<span class=\"token punctuation\">(</span>ny<span class=\"token punctuation\">,</span> nx<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\r\n                <span class=\"token keyword\">continue</span>\r\n\r\n            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>b<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span>ny<span class=\"token punctuation\">,</span> nx<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> isFlipped<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span>f_y<span class=\"token punctuation\">,</span> f_x<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">in</span> visit<span class=\"token punctuation\">:</span>\r\n                <span class=\"token keyword\">continue</span>\r\n\r\n            visit<span class=\"token punctuation\">.</span>add<span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>b<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span>ny<span class=\"token punctuation\">,</span> nx<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> isFlipped<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span>f_y<span class=\"token punctuation\">,</span> f_x<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\r\n            q<span class=\"token punctuation\">.</span>append<span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>b<span class=\"token punctuation\">,</span> ny<span class=\"token punctuation\">,</span> nx<span class=\"token punctuation\">,</span> isFlipped<span class=\"token punctuation\">,</span> f_y<span class=\"token punctuation\">,</span> f_x<span class=\"token punctuation\">,</span> count <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\r\n\r\n        <span class=\"token comment\"># 현재 한장은 뒤집은 상태에서 다른것 뒤집으려 할때</span>\r\n        <span class=\"token keyword\">if</span> isFlipped<span class=\"token punctuation\">:</span>\r\n            <span class=\"token comment\"># 카드 짝 찾는데 성공하면</span>\r\n            <span class=\"token comment\"># 0으로 뒤집고</span>\r\n            <span class=\"token keyword\">if</span> b<span class=\"token punctuation\">[</span>idxConverter<span class=\"token punctuation\">(</span>f_y<span class=\"token punctuation\">,</span> f_x<span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">==</span> b<span class=\"token punctuation\">[</span>idxConverter<span class=\"token punctuation\">(</span>y<span class=\"token punctuation\">,</span> x<span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span> <span class=\"token keyword\">and</span> <span class=\"token punctuation\">(</span>f_y<span class=\"token punctuation\">,</span> f_x<span class=\"token punctuation\">)</span> <span class=\"token operator\">!=</span> <span class=\"token punctuation\">(</span>y<span class=\"token punctuation\">,</span> x<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\r\n\r\n                b <span class=\"token operator\">=</span> switchTo0<span class=\"token punctuation\">(</span>b<span class=\"token punctuation\">,</span>b<span class=\"token punctuation\">[</span>idxConverter<span class=\"token punctuation\">(</span>f_y<span class=\"token punctuation\">,</span> f_x<span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\r\n        \r\n\r\n                <span class=\"token comment\"># 여기서 끝낼수있음</span>\r\n\r\n                <span class=\"token keyword\">if</span> isEnd<span class=\"token punctuation\">(</span>b<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\r\n                    <span class=\"token keyword\">return</span> count <span class=\"token operator\">+</span> <span class=\"token number\">1</span>\r\n\r\n                <span class=\"token comment\"># print(b)</span>\r\n                visit<span class=\"token punctuation\">.</span>add<span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>b<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span>y<span class=\"token punctuation\">,</span> x<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token boolean\">False</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\r\n                q<span class=\"token punctuation\">.</span>append<span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>b<span class=\"token punctuation\">,</span> y<span class=\"token punctuation\">,</span> x<span class=\"token punctuation\">,</span> <span class=\"token boolean\">False</span><span class=\"token punctuation\">,</span> <span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> count <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\r\n                \r\n            <span class=\"token comment\"># 짝은 안맞으면</span>\r\n            <span class=\"token keyword\">else</span><span class=\"token punctuation\">:</span>\r\n\r\n                <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>b<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span>y<span class=\"token punctuation\">,</span> x<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token boolean\">False</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">in</span> visit<span class=\"token punctuation\">:</span>\r\n                    <span class=\"token keyword\">continue</span>\r\n                visit<span class=\"token punctuation\">.</span>add<span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>b<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span>y<span class=\"token punctuation\">,</span> x<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token boolean\">False</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\r\n                q<span class=\"token punctuation\">.</span>append<span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>b<span class=\"token punctuation\">,</span> y<span class=\"token punctuation\">,</span> x<span class=\"token punctuation\">,</span> <span class=\"token boolean\">False</span><span class=\"token punctuation\">,</span> <span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> count <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\r\n        <span class=\"token comment\"># 아직 뒤집지 않은 상태</span>\r\n        <span class=\"token comment\"># 이제 뒤집기</span>\r\n        <span class=\"token keyword\">else</span><span class=\"token punctuation\">:</span>\r\n            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>b<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span>y<span class=\"token punctuation\">,</span> x<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token boolean\">True</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span>y<span class=\"token punctuation\">,</span> x<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">in</span> visit<span class=\"token punctuation\">:</span>\r\n                <span class=\"token keyword\">continue</span>\r\n\r\n            visit<span class=\"token punctuation\">.</span>add<span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>b<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span>y<span class=\"token punctuation\">,</span> x<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token boolean\">True</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span>y<span class=\"token punctuation\">,</span> x<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\r\n            q<span class=\"token punctuation\">.</span>append<span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>b<span class=\"token punctuation\">,</span> y<span class=\"token punctuation\">,</span> x<span class=\"token punctuation\">,</span> <span class=\"token boolean\">True</span><span class=\"token punctuation\">,</span> y<span class=\"token punctuation\">,</span> x<span class=\"token punctuation\">,</span> count <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\r\n</code></pre></div>\n<blockquote>\n<p>백준 난이도로 환산하면 골드2 정도로 보인다.</p>\n</blockquote>\n<blockquote>\n<p>은근히 테케에 빈틈이 많은 문제다.</p>\n</blockquote>\n<blockquote>\n<p>첫 시도는 80점 내외로 맞고 조금씩 변경해 80->96->100점을 받을 수 있었다.</p>\n</blockquote>\n<div class=\"table-of-contents\">\n<ul>\n<li>\n<p><a href=\"#%EB%AC%B8%EC%A0%9C-%EC%A0%9C%EB%AA%A9\">문제 제목</a></p>\n</li>\n<li>\n<p><a href=\"#%EB%AC%B8%EC%A0%9C-%EC%84%A4%EB%AA%85\">문제 설명</a></p>\n</li>\n<li>\n<p><a href=\"#%EB%AC%B8%EC%A0%9C\">문제</a></p>\n</li>\n<li>\n<p><a href=\"#%EC%A0%9C%ED%95%9C-%EC%82%AC%ED%95%AD\">제한 사항</a></p>\n</li>\n<li>\n<p><a href=\"#%EC%98%88%EC%A0%9C-%EC%9E%85%EC%B6%9C%EB%A0%A5\">예제 입출력</a></p>\n</li>\n<li>\n<p><a href=\"#%ED%92%80%EC%9D%B4\">풀이</a></p>\n<ul>\n<li><a href=\"#%EC%82%AC%EA%B3%A0%EC%9D%98-%EA%B3%BC%EC%A0%95\">사고의 과정</a></li>\n<li><a href=\"#%EC%BB%A4%EC%84%9C%EB%A5%BC-%EA%B8%B0%EC%A4%80%EC%9C%BC%EB%A1%9C-%EC%83%9D%EA%B0%81%ED%95%98%EC%9E%90\">커서를 기준으로 생각하자.</a></li>\n<li><a href=\"#%EB%B3%80%ED%99%94%ED%95%98%EB%8A%94-%EC%83%81%ED%83%9C\">변화하는 상태</a></li>\n<li><a href=\"#%EA%B5%AC%ED%98%84-%EC%9D%98%EC%82%AC%EC%BD%94%EB%93%9C\">구현 의사코드</a></li>\n<li><a href=\"#%EA%B5%AC%ED%98%84%EC%97%90%EC%84%9C%EC%9D%98-%EB%AA%87%EA%B0%80%EC%A7%80-%ED%8C%81\">구현에서의 몇가지 팁</a></li>\n<li><a href=\"#%ED%95%B4%EC%84%A4%EA%B3%BC%EB%8A%94-%EB%8B%A4%EB%A5%B8-%ED%92%80%EC%9D%B4%EC%9E%85%EB%8B%88%EB%8B%A4\">해설과는 다른 풀이입니다.</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#%ED%92%80%EC%9D%B4%EC%BD%94%EB%93%9C\">풀이코드</a></p>\n</li>\n</ul>\n</div>","excerpt":"정답률 0.95퍼의 무시무시한 문제다.  문제 제목 카드 짝 맞추기 문제 설명 \r\n게임 개발자인 베로니는 개발 연습을 위해 다음과 같은 간단한 카드 짝맞추기 보드 게임을 개발해 보려고 합니다.\r\n게임이 시작되면 화면에는 카드 16장이 뒷면을 위로하여 4 x 4 크기의 격자 형태로 표시되어 있습니다. 각 카드의 앞면에는 카카오프렌즈 캐릭터 그림이 그려져 있으며, 8가지의 캐릭터 그림이 그려진 카드가 각기 2장씩 화면에 무작위로 배치되어 있습니다.\r\n유저가 카드를 2장 선택하여 앞면으로 뒤집었을 때 같은 그림이 그려진 카드면 해당 카드는 게임 화면에서 사라지며, 같은 그림이 아니라면 원래 상태로 뒷면이 보이도록 뒤집힙니다. 이와 같은 방법으로 모든 카드를 화면에서 사라지게 하면 게임이 종료됩니다. 게임에서 카드를 선택하는 방법은 다음과 같습니다. 카드는 커서를 이용해서 선택할 수 있습니다. 커서는 4 x 4 화면에서 유저가 선택한 현재 위치를 표시하는 “굵고 빨간 테두리 상자”를 의미…","frontmatter":{"date":"September 16, 2021","title":"프로그래머스 - 카드 짝 맞추기 (2021 카카오 블라인드 공채)","categories":"PS","author":"weasel","emoji":"📓"},"fields":{"slug":"/programmers-flip-card/"}},"next":{"id":"66048345-c84e-5c3f-b3e2-0a3cfe60a3e9","html":"<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 30.555555555555554%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAAAsTAAALEwEAmpwYAAABlUlEQVQY0z2Q7U8SAQDG7z9rq7VVrg8tzSQFLkBgJxH0NtFmNZXVMQYrKaXR0JkeHAFx3AHeCyJKsda3/p5fu3Pzw7Pfh+flwyO0zDNcNc0RHeuCrjOlZY1p9IdceScjtOGE3vkfj2rPQR9N2S6UmPc/pvh1n+7pLy8ndJwLr3TQ0DjQDXYaFaq1Jvs/dH7a557cckVpki1+Jv+lgk8Mk8psEJKS5EtlwitP6TgT3C1B6Z6gaCZlpc4z7Q3r/2Q+GEWqxy0U3eJYG1A3bMKJFPd9fm7cuUuuVOaBX2QpEuew3SOSSHPU6aN0TYRgVCIYifMwHmP2eZrY3ltSWoaFgIgYW0GMSfiCITLvsrzezpF4sUry1RrXbt5i5t4sgeU412/PeBSjEkLdsGgPRuS+V5lfXyWhymz2ZY4aBo2+g2pY1HSTweQv2WKJ5SdpNt7nmVsMsBiKIu+UCUQl1J6NatgIbXuM7kzZ7dVY+y2zNfxERa2jn05pW+OrH92fXW7mCiRfZjhs6WzlPzL3aInC3jf0s8v8f6HdTNw+pBvIAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"race road\"\n        title=\"race road\"\n        src=\"/static/4cbf0d6d188cbd80f46f5ba17c6ab6e1/37523/race-road.png\"\n        srcset=\"/static/4cbf0d6d188cbd80f46f5ba17c6ab6e1/e9ff0/race-road.png 180w,\n/static/4cbf0d6d188cbd80f46f5ba17c6ab6e1/f21e7/race-road.png 360w,\n/static/4cbf0d6d188cbd80f46f5ba17c6ab6e1/37523/race-road.png 720w,\n/static/4cbf0d6d188cbd80f46f5ba17c6ab6e1/00d43/race-road.png 1000w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<h3 id=\"문제-제목\" style=\"position:relative;\"><a href=\"#%EB%AC%B8%EC%A0%9C-%EC%A0%9C%EB%AA%A9\" aria-label=\"문제 제목 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>문제 제목</h3>\n<p><a href=\"https://programmers.co.kr/learn/courses/30/lessons/67259\">경주로 건설</a></p>\n<h3 id=\"문제-설명\" style=\"position:relative;\"><a href=\"#%EB%AC%B8%EC%A0%9C-%EC%84%A4%EB%AA%85\" aria-label=\"문제 설명 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>문제 설명</h3>\n<p><img src=\"https://images.velog.io/images/hsw0194/post/8326247c-0516-4faf-a2a5-4baacac9e202/image.png\" alt=\"\">\r\n건설회사의 설계사인 죠르디는 고객사로부터 자동차 경주로 건설에 필요한 견적을 의뢰받았습니다.\r\n제공된 경주로 설계 도면에 따르면 경주로 부지는 N x N 크기의 정사각형 격자 형태이며 각 격자는 1 x 1 크기입니다.\r\n설계 도면에는 각 격자의 칸은 0 또는 1 로 채워져 있으며, 0은 칸이 비어 있음을 1은 해당 칸이 벽으로 채워져 있음을 나타냅니다.\r\n경주로의 출발점은 (0, 0) 칸(좌측 상단)이며, 도착점은 (N-1, N-1) 칸(우측 하단)입니다. 죠르디는 출발점인 (0, 0) 칸에서 출발한 자동차가 도착점인 (N-1, N-1) 칸까지 무사히 도달할 수 있게 중간에 끊기지 않도록 경주로를 건설해야 합니다.\r\n경주로는 상, 하, 좌, 우로 인접한 두 빈 칸을 연결하여 건설할 수 있으며, 벽이 있는 칸에는 경주로를 건설할 수 없습니다.\r\n이때, 인접한 두 빈 칸을 상하 또는 좌우로 연결한 경주로를 직선 도로 라고 합니다.\r\n또한 두 직선 도로가 서로 직각으로 만나는 지점을 코너 라고 부릅니다.\r\n건설 비용을 계산해 보니 직선 도로 하나를 만들 때는 100원이 소요되며, 코너를 하나 만들 때는 500원이 추가로 듭니다.\r\n죠르디는 견적서 작성을 위해 경주로를 건설하는 데 필요한 최소 비용을 계산해야 합니다.</p>\n<p>예를 들어, 아래 그림은 직선 도로 6개와 코너 4개로 구성된 임의의 경주로 예시이며, 건설 비용은 6 x 100 + 4 x 500 = 2600원 입니다.\r\n<img src=\"https://images.velog.io/images/hsw0194/post/aef8054f-c65c-488a-b209-3d34dc644a2a/image.png\" alt=\"\">\r\n또 다른 예로, 아래 그림은 직선 도로 4개와 코너 1개로 구성된 경주로이며, 건설 비용은 4 x 100 + 1 x 500 = 900원 입니다.\r\n<img src=\"https://images.velog.io/images/hsw0194/post/714149fd-a102-4f9e-87eb-1029f4fe0ecb/image.png\" alt=\"\">\r\n도면의 상태(0은 비어 있음, 1은 벽)을 나타내는 2차원 배열 board가 매개변수로 주어질 때, 경주로를 건설하는데 필요한 최소 비용을 return 하도록 solution 함수를 완성해주세요.</p>\n<h4 id=\"제한-사항\" style=\"position:relative;\"><a href=\"#%EC%A0%9C%ED%95%9C-%EC%82%AC%ED%95%AD\" aria-label=\"제한 사항 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>제한 사항</h4>\n<ul>\n<li>board는 2차원 정사각 배열로 배열의 크기는 3 이상 25 이하입니다.</li>\n<li>board 배열의 각 원소의 값은 0 또는 1 입니다.</li>\n<li>도면의 가장 왼쪽 상단 좌표는 (0, 0)이며, 가장 우측 하단 좌표는 (N-1, N-1) 입니다.</li>\n</ul>\n<p>원소의 값 0은 칸이 비어 있어 도로 연결이 가능함을 1은 칸이 벽으로 채워져 있어 도로 연결이 불가능함을 나타냅니다.</p>\n<ul>\n<li>board는 항상 출발점에서 도착점까지 경주로를 건설할 수 있는 형태로 주어집니다.</li>\n</ul>\n<p>출발점과 도착점 칸의 원소의 값은 항상 0으로 주어집니다.</p>\n<h3 id=\"예제-입출력\" style=\"position:relative;\"><a href=\"#%EC%98%88%EC%A0%9C-%EC%9E%85%EC%B6%9C%EB%A0%A5\" aria-label=\"예제 입출력 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>예제 입출력</h3>\n<p><strong>입력</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">[[0,0,0],[0,0,0],[0,0,0]]\t\r\n[[0,0,0,0,0,0,0,1],[0,0,0,0,0,0,0,0],[0,0,0,0,0,1,0,0],[0,0,0,0,1,0,0,0],[0,0,0,1,0,0,0,1],[0,0,1,0,0,0,1,0],[0,1,0,0,0,1,0,0],[1,0,0,0,0,0,0,0]]\t\r\n[[0,0,1,0],[0,0,0,0],[0,1,0,1],[1,0,0,0]]\t\r\n[[0,0,0,0,0,0],[0,1,1,1,1,0],[0,0,1,0,0,0],[1,0,0,1,0,1],[0,1,0,0,0,1],[0,0,0,0,0,0]]\t</code></pre></div>\n<p><strong>입출력 예 #4</strong>\r\n<img src=\"https://images.velog.io/images/hsw0194/post/b1614d13-f782-4bbe-807e-86c1216d0580/image.png\" alt=\"\"></p>\n<blockquote>\n<p>붉은색 경로와 같이 경주로를 건설하면 직선 도로 12개, 코너 4개로 총 3200원이 듭니다.</p>\n</blockquote>\n<p>만약, 파란색 경로와 같이 경주로를 건설한다면 직선 도로 10개, 코너 5개로 총 3500원이 들며, 더 많은 비용이 듭니다.</p>\n<p><strong>출력</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">900\r\n3800\r\n2100\r\n3200</code></pre></div>\n<h3 id=\"풀이\" style=\"position:relative;\"><a href=\"#%ED%92%80%EC%9D%B4\" aria-label=\"풀이 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>풀이</h3>\n<p>처음 든 생각은 카카오다운 문제였다. BFS/DFS와 같은 어렵지 않은 탐색 풀이를 요구하지만 , naive하지 않고 여러가지 제약을 주고 <del>문제가 귀엽고</del> 문제 설명이 굉장히 친절하다는 것이다. 예시도 굉장히 많고 각각의 예시에 대해서 설명이 나와있기 때문에 코너케이스 방어에 쉽고 논리구조 쌓기가 수월하다.</p>\n<p><strong>그렇다고 마냥 쉬운 문제는 아니다.</strong></p>\n<h4 id=\"사고의-과정\" style=\"position:relative;\"><a href=\"#%EC%82%AC%EA%B3%A0%EC%9D%98-%EA%B3%BC%EC%A0%95\" aria-label=\"사고의 과정 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>사고의 과정</h4>\n<p>문제 독해를 천천히 해보면, 최단경로를 구하는 문제처럼 포장을 해놓았다. 하지만 바로 위에 언급한 <strong>입출력 #4</strong>를 보면 파란색 경로가 최단경로임을 알 수 있지만, 최단경로가 아닌 빨간색 경로가 가장 적은 비용으로 목표지점에 도달할 수 있는 경로다. naive하게 최단경로를 구하는 문제는 아닌것이다.</p>\n<p>그렇다고 <a href=\"https://www.acmicpc.net/problem/1967\">트리의 지름</a> 같은 최장경로 문제일까? <strong>전혀 아니다.</strong> 최소한 우리가 구하는 경로는 최단경로에 근접하지만, 그 안에서 비용을 고민해야 하는 문제다.</p>\n<p>문제내에 명시된 비용의 제약사항은 아래와 같다.</p>\n<blockquote>\n<p>인접한 두 빈 칸을 상하 또는 좌우로 연결한 경주로를 직선도로라고 합니다. 또한 두 직선 도로가 <strong>서로 직각으로 만나는 지점을 코너</strong>라고 부릅니다.</p>\n</blockquote>\n<p>쉬운 말로 바꾸면, 경주로가 계속 <strong>오른쪽으로 가다가 위,아래 방향</strong>으로 바꾸면 되면 코너가 생긴다는 것이다. (<strong>왜 왼쪽이 제외되었는가는 아래에서 설명하겠다.</strong>) 다시 말해서 탐색의 방향이 전환되는 시점에서 코너가 생긴다는 것이고, 직전의 탐색의 방향이 중요하니 기록 할 필요가 있다.</p>\n<blockquote>\n<p>이걸 본 순간 바로 떠오른 비슷한 문제가 있다. 백준의 <a href=\"https://www.acmicpc.net/problem/1726\">로봇</a>이라는 문제인데, 단순히 탐색이 아닌 이전 탐색에서의 방향이 지금의 탐색의 명령개수에 영향을 주는 문제다.</p>\n</blockquote>\n<h4 id=\"visit-배열에-이전-방향이-포함되어야하나\" style=\"position:relative;\"><a href=\"#visit-%EB%B0%B0%EC%97%B4%EC%97%90-%EC%9D%B4%EC%A0%84-%EB%B0%A9%ED%96%A5%EC%9D%B4-%ED%8F%AC%ED%95%A8%EB%90%98%EC%96%B4%EC%95%BC%ED%95%98%EB%82%98\" aria-label=\"visit 배열에 이전 방향이 포함되어야하나 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>visit 배열에 이전 방향이 포함되어야하나?</h4>\n<p>직전 탐색의 방향이 중요하다는 것은, 직전 탐색에서의 상황이 단순 <strong>x,y</strong>좌표가 아니라 <strong>상,하,좌,우</strong>인 방향 역시 포함한다는 것이다. <a href=\"https://velog.io/@hsw0194/%EB%B0%B1%EC%A4%80-16922-%EB%A1%9C%EB%A7%88%EC%88%AB%EC%9E%90-%EB%A7%8C%EB%93%A4%EA%B8%B0\">일차원 DFS 탐색에 관한 이전 글</a>에서 명시한 내용 중에서 <em>BFS와 DFS든 노드의 방문여부 배열의 차원을 구성하는것은 노드를 방문할때의 상황의 개수에 따라 나뉘어 진다는것</em> 이라는 부분이 있다.</p>\n<p>그러면 (x,y)를 방문했는지 체크하는 visit 배열이 직전 방향까지 포함한 3차원이여야 할것같다.</p>\n<blockquote>\n<p><code class=\"language-text\">visit[y][x][prev_dir]</code> =이전 방향이 prev_dir인 상태로 (x,y)를 방문했는지</p>\n</blockquote>\n<p>아마 탐색할때 이런 식으로 검사하면 같은 방향 접근시 중복 방문을 막을 수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">if</span> <span class=\"token number\">0</span><span class=\"token operator\">&lt;=</span>ny<span class=\"token operator\">&lt;</span>n <span class=\"token keyword\">and</span> <span class=\"token number\">0</span><span class=\"token operator\">&lt;=</span>nx<span class=\"token operator\">&lt;</span>n <span class=\"token keyword\">and</span> board<span class=\"token punctuation\">[</span>ny<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>nx<span class=\"token punctuation\">]</span><span class=\"token operator\">!=</span><span class=\"token number\">1</span> <span class=\"token keyword\">and</span> <span class=\"token keyword\">not</span> visit<span class=\"token punctuation\">[</span>ny<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>nx<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token builtin\">dir</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">:</span>\r\n    visit<span class=\"token punctuation\">[</span>ny<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>nx<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token builtin\">dir</span><span class=\"token punctuation\">]</span><span class=\"token operator\">=</span><span class=\"token boolean\">True</span>\r\n    q<span class=\"token punctuation\">.</span>append<span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>ny<span class=\"token punctuation\">,</span>nx<span class=\"token punctuation\">,</span><span class=\"token builtin\">dir</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></code></pre></div>\n<h4 id=\"확실하게-틀리는-반례\" style=\"position:relative;\"><a href=\"#%ED%99%95%EC%8B%A4%ED%95%98%EA%B2%8C-%ED%8B%80%EB%A6%AC%EB%8A%94-%EB%B0%98%EB%A1%80\" aria-label=\"확실하게 틀리는 반례 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>확실하게 틀리는 반례</h4>\n<p><strong>문제 해결!!!</strong> 이면 참 좋겠지만, 예시조차 통과하지 못한다. 그 이유는 아래와 같다.\r\n<img src=\"https://images.velog.io/images/hsw0194/post/a09fb254-5c56-4a89-9dec-a028d894ac3c/%EA%B7%B8%EB%A6%BC2.png\" alt=\"\">\r\n위의 그림에서 파란색 경로와 빨간색 경로가 있다고 할때 빨간색 경로가 최소비용을 가지는 경로다. 주의 깊게 봐야할 부분은 초록색 박스를 친 부분이다.</p>\n<p>만약 파란색 경로가 빨간색 경로보다 먼저 수행된다고 한다면 , <strong>(3,1)에서 (3,2)</strong> 으로 내려올때 <code class=\"language-text\">visit[2][3][up]</code>의 값은 <code class=\"language-text\">False</code>에서 <code class=\"language-text\">True</code>로 바뀌게 된다. <strong>(3,2)</strong> 를 위에서 아래로 내려오는 방문은 추후 탐색에서 방문 불가능한 상태인것이다.</p>\n<p>그런데 빨간색 경로는 정확하게 <strong>(3,2)</strong> 로 내려오는 경로를 포함하고 있다. <code class=\"language-text\">visit[2][3][up]</code>을 체크하게 되는데, 이전 탐색인 파란색 경로에서 이미 <code class=\"language-text\">True</code>로 저장했기 때문에 방문할수 없게 되는 것이다. <strong>최소 비용</strong>이 아닌 경로가 미리 방문했기 때문에 <strong>최소 비용</strong>을 가지는 경로가 정상적인 탐색을 진행할 수 없게 되는 것이다.</p>\n<h4 id=\"그러면-어떻게\" style=\"position:relative;\"><a href=\"#%EA%B7%B8%EB%9F%AC%EB%A9%B4-%EC%96%B4%EB%96%BB%EA%B2%8C\" aria-label=\"그러면 어떻게 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>그러면 어떻게?</h4>\n<p>그러면 어떻게 해야하는 걸까 ? 모든 가능한 경로마다 방문했던 좌표를 기록해야 하나? 그러면 확실하게 답을 구할 수 있다. 파란색이 방문한 <strong>(3,2)</strong> 와 빨간색이 방문한 <strong>(3,2)</strong> 는 다르기 때문이다. 하지만 공간 복잡도가 지수만큼 증가하기에 적절하지 않다.</p>\n<p>문제를 다시 천천히 읽어보면, 각각의 좌표들에 대해서 <strong>최소 비용</strong>경로로 접근해야하는 것이다. 위의 예시를 다시 보면, <strong>(3,2)</strong> 를 방문할때 빨간색 경로의 비용과 파란색 경로의 비용을 비교하면 빨간색 경로의 비용이 더 적다. 그 말은 이미 파란색 경로에서 <strong>(3,2)</strong> 를 방문했더라도, 빨간색 경로가 더 적은 건설비용을 계산 할 수 있으면 <strong>(3,2)</strong> 를 재방문하게 해야 한다. <strong>조건적인 재방문을 허용할 필요가 있고 <code class=\"language-text\">visit</code> 배열을 재정의해야 한다.</strong></p>\n<h4 id=\"visit-배열의-dp적-특성\" style=\"position:relative;\"><a href=\"#visit-%EB%B0%B0%EC%97%B4%EC%9D%98-dp%EC%A0%81-%ED%8A%B9%EC%84%B1\" aria-label=\"visit 배열의 dp적 특성 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>visit 배열의 DP적 특성</h4>\n<blockquote>\n<p><code class=\"language-text\">visit[y][x]</code> = (x,y)를 방문했을때의 비용, (x,y)를 방문할때 비용이 visit[y][x]보다 작거나 같으면 재방문 가능</p>\n</blockquote>\n<p>이렇게 정의하고 다시 문제를 보자. 모든 노드들간의 간선이  <strong>양의 가중치를 갖는</strong> 그래프에서의 <strong>DP와 BFS</strong>문제로 볼 수 있다.</p>\n<p>결국에 문제의 핵심은 <strong>(y,x)로 도착하는 최소 비용</strong> 경로가 새로 있다면, 중복 방문을 허용하는 아이디어다. 위에 살짝 언급한 아래 사례는 visit 배열의 특성을 생각하면 자명하게 풀린다.</p>\n<blockquote>\n<p>경주로가 계속 오른쪽으로 가다가 위,아래 방향으로 바꾸면 되면 코너가 생긴다는 것이다. (왜 왼쪽이 제외되었는가는 아래에서 설명하겠다.)</p>\n</blockquote>\n<p><strong>오른쪽</strong>으로만 가다가 <strong>왼쪽</strong>으로 방향을 트는 것은 , 왔던 곳을 되돌아 가는 것이고, <strong>모든 좌표끼리의 이동은 양의 가중치</strong>를 갖기 때문에 되돌아 갈때는 왔던 것보다 무조건 큰 비용을 갖기 때문에 왼쪽 방향으로 이동을 고려할 필요가 없는 것이다.</p>\n<p><strong><code class=\"language-text\">visit[y][x]</code>의 비용보다 같을때도 중복 방문을 허용</strong>해야 하는 이유가 뭘까?\r\n간단히 생각해서 최소비용 경로가 무조건 <strong>(3,3)</strong> 을 방문해야 한다고 해보자. <strong>(3,3)</strong> 을  직선으로 방문할때가 있고, 꺾어서 방문할때가 있다. 만약 <strong>(3,3)</strong> 을 방문하기 전까지의 둘의 비용이 같다고 할때 ,먼저 꺾어서 방문하게 되는 경우에는 추후에 추가적으로 코너 건설 비용이 500만큼 더 들기 때문에 <strong>최소 비용</strong> 거리가 아닐 수 있다. 그렇기에 비용이 같을때 방문을 막게 된다면 일직선으로 <strong>(3,3)</strong> 을 방문하는 최소비용 거리를 구할수 없다.</p>\n<p>나머지 부분은 단순 구현이기 때문에 설명은 생략한다.</p>\n<h3 id=\"풀이코드\" style=\"position:relative;\"><a href=\"#%ED%92%80%EC%9D%B4%EC%BD%94%EB%93%9C\" aria-label=\"풀이코드 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>풀이코드</h3>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">from</span> collections <span class=\"token keyword\">import</span> deque\r\n<span class=\"token keyword\">def</span> <span class=\"token function\">solution</span><span class=\"token punctuation\">(</span>board<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\r\n    n<span class=\"token operator\">=</span><span class=\"token builtin\">len</span><span class=\"token punctuation\">(</span>board<span class=\"token punctuation\">)</span>\r\n    answer <span class=\"token operator\">=</span> <span class=\"token number\">1e9</span>\r\n    <span class=\"token comment\"># 최단거리가 최소값이 아닐 수 있다. 하지만 근접하게 풀어야한다.</span>\r\n    \r\n    dy<span class=\"token operator\">=</span><span class=\"token punctuation\">[</span><span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span>\r\n    dx<span class=\"token operator\">=</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span><span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span>\r\n    \r\n    q<span class=\"token operator\">=</span>deque<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\r\n    <span class=\"token comment\"># visit 배열을 모두 INF로 채움</span>\r\n    visit<span class=\"token operator\">=</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">[</span><span class=\"token builtin\">float</span><span class=\"token punctuation\">(</span><span class=\"token string\">'inf'</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">for</span> _ <span class=\"token keyword\">in</span> <span class=\"token builtin\">range</span><span class=\"token punctuation\">(</span>n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span><span class=\"token keyword\">for</span> _ <span class=\"token keyword\">in</span> <span class=\"token builtin\">range</span><span class=\"token punctuation\">(</span>n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span>\r\n    \r\n    q<span class=\"token punctuation\">.</span>append<span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span><span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\r\n    \r\n    <span class=\"token keyword\">while</span> q<span class=\"token punctuation\">:</span>\r\n        y<span class=\"token punctuation\">,</span>x<span class=\"token punctuation\">,</span>cost<span class=\"token punctuation\">,</span>prev_dir<span class=\"token operator\">=</span>q<span class=\"token punctuation\">.</span>popleft<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\r\n        \r\n        <span class=\"token comment\"># 도착했다면</span>\r\n        <span class=\"token keyword\">if</span> y<span class=\"token operator\">==</span>n<span class=\"token operator\">-</span><span class=\"token number\">1</span> <span class=\"token keyword\">and</span> x<span class=\"token operator\">==</span>n<span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">:</span>\r\n            answer<span class=\"token operator\">=</span><span class=\"token builtin\">min</span><span class=\"token punctuation\">(</span>answer<span class=\"token punctuation\">,</span>cost<span class=\"token punctuation\">)</span>\r\n            <span class=\"token keyword\">continue</span>\r\n            \r\n        \r\n        <span class=\"token keyword\">for</span> k <span class=\"token keyword\">in</span> <span class=\"token builtin\">range</span><span class=\"token punctuation\">(</span><span class=\"token number\">4</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\r\n            <span class=\"token comment\"># 이전 방향과 다르다면 코너 건설비용이 추가로 듬</span>\r\n            curve_cost<span class=\"token operator\">=</span><span class=\"token number\">0</span> <span class=\"token keyword\">if</span> prev_dir<span class=\"token operator\">==</span>k <span class=\"token keyword\">else</span> <span class=\"token number\">500</span>\r\n            \r\n            new_cost<span class=\"token operator\">=</span>cost<span class=\"token operator\">+</span><span class=\"token number\">100</span><span class=\"token operator\">+</span>curve_cost\r\n\r\n            ny<span class=\"token punctuation\">,</span>nx<span class=\"token operator\">=</span>y<span class=\"token operator\">+</span>dy<span class=\"token punctuation\">[</span>k<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>x<span class=\"token operator\">+</span>dx<span class=\"token punctuation\">[</span>k<span class=\"token punctuation\">]</span>\r\n            \r\n            <span class=\"token comment\"># (nx,ny) 방문시 이전 방문보다 적은 비용으로 방문하면</span>\r\n            <span class=\"token keyword\">if</span> <span class=\"token number\">0</span><span class=\"token operator\">&lt;=</span>ny<span class=\"token operator\">&lt;</span>n <span class=\"token keyword\">and</span> <span class=\"token number\">0</span><span class=\"token operator\">&lt;=</span>nx<span class=\"token operator\">&lt;</span>n <span class=\"token keyword\">and</span> board<span class=\"token punctuation\">[</span>ny<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>nx<span class=\"token punctuation\">]</span><span class=\"token operator\">!=</span><span class=\"token number\">1</span> <span class=\"token keyword\">and</span> new_cost<span class=\"token operator\">&lt;=</span>visit<span class=\"token punctuation\">[</span>ny<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>nx<span class=\"token punctuation\">]</span><span class=\"token punctuation\">:</span>\r\n                visit<span class=\"token punctuation\">[</span>ny<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>nx<span class=\"token punctuation\">]</span><span class=\"token operator\">=</span>new_cost\r\n                q<span class=\"token punctuation\">.</span>append<span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>ny<span class=\"token punctuation\">,</span>nx<span class=\"token punctuation\">,</span>new_cost<span class=\"token punctuation\">,</span>k<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\r\n    <span class=\"token comment\"># 초기 출발시에는 방향이 없으니 무조건 코너를 돌게 하는데</span>\r\n    <span class=\"token comment\"># 불필요하게 500의 초과 비용이 발생하니 빼줘야함</span>\r\n    <span class=\"token keyword\">return</span> answer<span class=\"token operator\">-</span><span class=\"token number\">500</span>\r\n</code></pre></div>\n<blockquote>\n<p>백준 난이도로 환산하면 골드4 정도로 보인다.</p>\n</blockquote>\n<blockquote>\n<p>아주 깔끔하고 재밌는 문제였다. 30~40분 내로 풀이하면 적절하다.</p>\n</blockquote>\n<blockquote>\n<p>bottom up DP로 풀어도 충분히 답이 나올것같다.</p>\n</blockquote>\n<div class=\"table-of-contents\">\n<ul>\n<li>\n<p><a href=\"#%EB%AC%B8%EC%A0%9C-%EC%A0%9C%EB%AA%A9\">문제 제목</a></p>\n</li>\n<li>\n<p><a href=\"#%EB%AC%B8%EC%A0%9C-%EC%84%A4%EB%AA%85\">문제 설명</a></p>\n<ul>\n<li><a href=\"#%EC%A0%9C%ED%95%9C-%EC%82%AC%ED%95%AD\">제한 사항</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#%EC%98%88%EC%A0%9C-%EC%9E%85%EC%B6%9C%EB%A0%A5\">예제 입출력</a></p>\n</li>\n<li>\n<p><a href=\"#%ED%92%80%EC%9D%B4\">풀이</a></p>\n<ul>\n<li><a href=\"#%EC%82%AC%EA%B3%A0%EC%9D%98-%EA%B3%BC%EC%A0%95\">사고의 과정</a></li>\n<li><a href=\"#visit-%EB%B0%B0%EC%97%B4%EC%97%90-%EC%9D%B4%EC%A0%84-%EB%B0%A9%ED%96%A5%EC%9D%B4-%ED%8F%AC%ED%95%A8%EB%90%98%EC%96%B4%EC%95%BC%ED%95%98%EB%82%98\">visit 배열에 이전 방향이 포함되어야하나?</a></li>\n<li><a href=\"#%ED%99%95%EC%8B%A4%ED%95%98%EA%B2%8C-%ED%8B%80%EB%A6%AC%EB%8A%94-%EB%B0%98%EB%A1%80\">확실하게 틀리는 반례</a></li>\n<li><a href=\"#%EA%B7%B8%EB%9F%AC%EB%A9%B4-%EC%96%B4%EB%96%BB%EA%B2%8C\">그러면 어떻게?</a></li>\n<li><a href=\"#visit-%EB%B0%B0%EC%97%B4%EC%9D%98-dp%EC%A0%81-%ED%8A%B9%EC%84%B1\">visit 배열의 DP적 특성</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#%ED%92%80%EC%9D%B4%EC%BD%94%EB%93%9C\">풀이코드</a></p>\n</li>\n</ul>\n</div>","frontmatter":{"date":"July 15, 2021","title":"프로그래머스 - 경주로 건설 (2020 카카오 인턴쉽)","categories":"PS","author":"weasel","emoji":"📓"},"fields":{"slug":"/programmers-build-race-road/"}},"prev":{"id":"e6098b1b-70f3-5e28-947b-b8dab3353972","html":"<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 719px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 56.111111111111114%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAABjElEQVQoz31SO47bMBTUIbbIAXKcRZogVZA27XZ7jXRp9xKB+1zApWHIsGUItCTDkvWzKEqUNME8mI7WcPKAwaMovnnzhvSmaQKj73vEcYzdbgelFMqyhPvHrLWW/f1+jyhSyLIWSv1Cmn5CEHyFUp9R1y/w5oSHwwHr9Rqr1QppmgqRgzEGQRDIvzDcI0lKKLVAnn+B739HGH6D1q/wcA0WHY9HQVVVGIZB9sdxlO8sy5DnuTS21sKYFl034T48FrKIaJoGRVFIYdu2uFwuQsBMCzgBLdlutzidTlchdoYBXl3X4l0UReITCZMkESIWLZdL8c4pnoeza772uq4TBSQmqIwjOYXMbERwdFpCpWzsiObE3rwjjXeKuZ4HFXJs2sJMIfcqhdBtWNtjHHtoTaUFrO3e3TItoKrz+SyknOK/hMYM0BqI41YyzzvfeIaj+74vnm42m9sEDwjHK2GINP2JIPiBpnmDMQv8PTvdXsIc/yAcrg/7N6bpA6rqI7R+grXPcBd7X/Tolh3hH4izTHKPcv51AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image\"\n        title=\"image\"\n        src=\"/static/3ced1b2df8c525ffaec0ce9aa709fff6/073e9/image.png\"\n        srcset=\"/static/3ced1b2df8c525ffaec0ce9aa709fff6/e9ff0/image.png 180w,\n/static/3ced1b2df8c525ffaec0ce9aa709fff6/f21e7/image.png 360w,\n/static/3ced1b2df8c525ffaec0ce9aa709fff6/073e9/image.png 719w\"\n        sizes=\"(max-width: 719px) 100vw, 719px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<h3 id=\"mappingregistry\" style=\"position:relative;\"><a href=\"#mappingregistry\" aria-label=\"mappingregistry permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>MappingRegistry</h3>\n<p><code class=\"language-text\">MappingRegistry</code>는 아까 살펴본 <code class=\"language-text\">AbstractHandlerMethodMapping</code>의 내부 클래스다. <code class=\"language-text\">MappingRegistry</code>는 <strong>handler method에 대한 모든 mapping을 유지 관리</strong>하고 <strong><code class=\"language-text\">lookup</code>을 수행하는 method</strong>를 가지고 있고 동시성을 가진 접근을 가능하게 해주는 레지스트리다.</p>\n<blockquote>\n<p>A registry that maintains all mappings to handler methods, exposing methods to perform lookups and providing concurrent access.</p>\n</blockquote>\n<p>Package-private for testing purposes.</p>\n<p>가장 중요한 부분이 <strong>handler method에 대한 모든 mapping을 유지 관리</strong>하고 <strong><code class=\"language-text\">lookup</code>을 수행하는 method</strong>를 가지고 있다는 것이다.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">MappingRegistry</span> <span class=\"token punctuation\">{</span>\r\n  <span class=\"token keyword\">private</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">Map</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">T</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">MappingRegistration</span><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">T</span><span class=\"token punctuation\">></span><span class=\"token punctuation\">></span></span> registry <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">HashMap</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n  <span class=\"token keyword\">private</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">Map</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">T</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">HandlerMethod</span><span class=\"token punctuation\">></span></span> mappingLookup <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">LinkedHashMap</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n  <span class=\"token keyword\">private</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">MultiValueMap</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">T</span><span class=\"token punctuation\">></span></span> urlLookup <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">LinkedMultiValueMap</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n  <span class=\"token keyword\">private</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">Map</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">List</span><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">HandlerMethod</span><span class=\"token punctuation\">></span><span class=\"token punctuation\">></span></span> nameLookup <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ConcurrentHashMap</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n  <span class=\"token keyword\">private</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">Map</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">HandlerMethod</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">CorsConfiguration</span><span class=\"token punctuation\">></span></span> corsLookup <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ConcurrentHashMap</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n  <span class=\"token keyword\">private</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">ReentrantReadWriteLock</span> readWriteLock <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ReentrantReadWriteLock</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n  <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>\r\n  <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>\r\n  \r\n  <span class=\"token comment\">// methods</span>\r\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><code class=\"language-text\">MappingRegistry</code> 안에서 <code class=\"language-text\">Map</code> 자료구조를 가진 멤버 변수들이 있다. 그 중에서<code class=\"language-text\">LinkedMultiValueMap</code>이라는 자료구조를 사용한다. 이건 한개의 key에 여러 value들을 저장하는 <code class=\"language-text\">MultiValueMap</code>을 <code class=\"language-text\">LinkedHashMap</code>으로 감싼 자료구조로 Spring이 만든 자료구조다.</p>\n<p><code class=\"language-text\">urlLookup</code>은 <code class=\"language-text\">LinkedMultiValueMap</code>의 자료구조인데, key는 <code class=\"language-text\">url</code>을 가지고, value는 <code class=\"language-text\">RequestMappingInfo</code>를 가진다. <code class=\"language-text\">LinkedMultiValueMap</code>을 쓰는 이유는 하나의 <code class=\"language-text\">url</code>에 여러 handlerMethod들에 대한 정보가 담기기 때문이다.</p>\n<p>예를 들어 <code class=\"language-text\">\"/app/user\"</code>라는 <code class=\"language-text\">url</code> 아래 user에 대한 정보를 조회하는 <code class=\"language-text\">GET</code>,user를 추가하는 <code class=\"language-text\">POST</code>가 매핑될때, 아래처럼 <code class=\"language-text\">RequestMappingInfo</code>가 들어가는 것이다.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">key <span class=\"token operator\">:</span> \"<span class=\"token operator\">/</span>app<span class=\"token operator\">/</span>user<span class=\"token operator\">/</span> \r\nvalue <span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token constant\">GET</span> <span class=\"token operator\">/</span>app<span class=\"token operator\">/</span>user<span class=\"token punctuation\">,</span><span class=\"token constant\">POST</span> <span class=\"token operator\">/</span>app<span class=\"token operator\">/</span>user<span class=\"token punctuation\">]</span></code></pre></div>\n<p>위와 같은 구조를 통해 <code class=\"language-text\">MappingRegistry</code>는 <code class=\"language-text\">url</code>에 해당하는 handlerMethod를 구별할 수 있게 된다. 코드로 보자.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">protected</span> <span class=\"token class-name\">HandlerMethod</span> <span class=\"token function\">lookupHandlerMethod</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> lookupPath<span class=\"token punctuation\">,</span> <span class=\"token class-name\">HttpServletRequest</span> request<span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">Exception</span> <span class=\"token punctuation\">{</span>\r\n  <span class=\"token class-name\">List</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Match</span><span class=\"token punctuation\">></span></span> matches <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ArrayList</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n  <span class=\"token class-name\">List</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">T</span><span class=\"token punctuation\">></span></span> directPathMatches <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>mappingRegistry<span class=\"token punctuation\">.</span><span class=\"token function\">getMappingsByUrl</span><span class=\"token punctuation\">(</span>lookupPath<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>directPathMatches <span class=\"token operator\">!=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token function\">addMatchingMappings</span><span class=\"token punctuation\">(</span>directPathMatches<span class=\"token punctuation\">,</span> matches<span class=\"token punctuation\">,</span> request<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n  <span class=\"token punctuation\">}</span>\r\n  <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>\r\n  <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>\r\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>matches<span class=\"token punctuation\">.</span><span class=\"token function\">isEmpty</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>\r\n    <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>\r\n    matches<span class=\"token punctuation\">.</span><span class=\"token function\">sort</span><span class=\"token punctuation\">(</span>comparator<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token class-name\">Match</span> bestMatch <span class=\"token operator\">=</span> matches<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>\r\n    <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>\r\n    request<span class=\"token punctuation\">.</span><span class=\"token function\">setAttribute</span><span class=\"token punctuation\">(</span>BEST_MATCHING_HANDLER_ATTRIBUTE<span class=\"token punctuation\">,</span> bestMatch<span class=\"token punctuation\">.</span>handlerMethod<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token function\">handleMatch</span><span class=\"token punctuation\">(</span>bestMatch<span class=\"token punctuation\">.</span>mapping<span class=\"token punctuation\">,</span> lookupPath<span class=\"token punctuation\">,</span> request<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token keyword\">return</span> bestMatch<span class=\"token punctuation\">.</span>handlerMethod<span class=\"token punctuation\">;</span>\r\n  <span class=\"token punctuation\">}</span>\r\n</code></pre></div>\n<p>위는 아까 잠깐 언급한 <code class=\"language-text\">lookupHandlerMethod</code>이다. <em><strong>적절한 <code class=\"language-text\">handlerMethod</code>를 가져온 후 return 한다</strong></em> 고 했는데 그 과정이 담겨있다.\r\n길다고 겁먹지 말고 한줄씩 보자. (<em>match되는 것이 없거나, 2개 이상인 경우는 제외함</em>)</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token class-name\">List</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Match</span><span class=\"token punctuation\">></span></span> matches <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ArrayList</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p><code class=\"language-text\">match</code>를 담는 <code class=\"language-text\">matches</code>라는 리스트가 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token class-name\">List</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">T</span><span class=\"token punctuation\">></span></span> directPathMatches <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>mappingRegistry<span class=\"token punctuation\">.</span><span class=\"token function\">getMappingsByUrl</span><span class=\"token punctuation\">(</span>lookupPath<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n</code></pre></div>\n<p>현재 <code class=\"language-text\">url</code>에 mapping되는 handler method들의 <code class=\"language-text\">RequestMappingInfo</code>들을 <code class=\"language-text\">getMappingsByUrl</code>로 가져온 후 <code class=\"language-text\">directPathMatches</code>에 저장한다. 예를 들어 <code class=\"language-text\">url</code>이 <code class=\"language-text\">/app/user</code>이면 <code class=\"language-text\">directPathMatches</code>에는 <code class=\"language-text\">[GET /app/user, POST /app/user]</code> 와 같은 정보가 들어오는 것이다.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>directPathMatches <span class=\"token operator\">!=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token function\">addMatchingMappings</span><span class=\"token punctuation\">(</span>directPathMatches<span class=\"token punctuation\">,</span> matches<span class=\"token punctuation\">,</span> request<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>그 후 <code class=\"language-text\">[GET /app/user, POST /app/user]</code> 중에서 request 정보와 일치하는 것들을 <code class=\"language-text\">addMatchingMappings</code>을 통해서 <code class=\"language-text\">matches</code>에 추가한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\">matches<span class=\"token punctuation\">.</span><span class=\"token function\">sort</span><span class=\"token punctuation\">(</span>comparator<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token class-name\">Match</span> bestMatch <span class=\"token operator\">=</span> matches<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p><code class=\"language-text\">matches</code>들을 우선순위에 맞게끔 정렬하고, request와 가장 일치하는 0번째 <code class=\"language-text\">match</code>를 <code class=\"language-text\">bestMatch</code>에 저장한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\">request<span class=\"token punctuation\">.</span><span class=\"token function\">setAttribute</span><span class=\"token punctuation\">(</span>BEST_MATCHING_HANDLER_ATTRIBUTE<span class=\"token punctuation\">,</span> bestMatch<span class=\"token punctuation\">.</span>handlerMethod<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token function\">handleMatch</span><span class=\"token punctuation\">(</span>bestMatch<span class=\"token punctuation\">.</span>mapping<span class=\"token punctuation\">,</span> lookupPath<span class=\"token punctuation\">,</span> request<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token keyword\">return</span> bestMatch<span class=\"token punctuation\">.</span>handlerMethod<span class=\"token punctuation\">;</span></code></pre></div>\n<p><code class=\"language-text\">bestMatch</code>의 멤버인 <code class=\"language-text\">handlerMethod</code>를 return해서 최종적으로 적합한 handler method를 찾게 된다.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">private</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Match</span> <span class=\"token punctuation\">{</span>\r\n\r\n  <span class=\"token keyword\">private</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">T</span> mapping<span class=\"token punctuation\">;</span>\r\n\r\n  <span class=\"token keyword\">private</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">HandlerMethod</span> handlerMethod<span class=\"token punctuation\">;</span>\r\n\r\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h3 id=\"reflection\" style=\"position:relative;\"><a href=\"#reflection\" aria-label=\"reflection permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Reflection</h3>\n<p>이제 마지막 궁금증만이 남았다.</p>\n<h3 id=\"출처\" style=\"position:relative;\"><a href=\"#%EC%B6%9C%EC%B2%98\" aria-label=\"출처 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>출처</h3>\n<p><a href=\"https://docs.spring.io/spring-framework/docs/4.3.2.RELEASE_to_4.3.3.RELEASE/Spring%20Framework%204.3.3.RELEASE/org/springframework/web/servlet/handler/AbstractHandlerMethodMapping.MappingRegistry.html\">MappingReigstry javadoc</a>\r\n<a href=\"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/util/LinkedMultiValueMap.html\">LinkedMultiValueMap javadoc</a></p>\n<div class=\"table-of-contents\">\n<ul>\n<li><a href=\"#mappingregistry\">MappingRegistry</a></li>\n<li><a href=\"#reflection\">Reflection</a></li>\n<li><a href=\"#%EC%B6%9C%EC%B2%98\">출처</a></li>\n</ul>\n</div>","frontmatter":{"date":"November 05, 2021","title":"Spring MVC - HandlerMapping의 동작방식 이해하기 2편","categories":"Spring","author":"weasel","emoji":"📓"},"fields":{"slug":"/how-spring-handler-mapping-works-2/"}},"site":{"siteMetadata":{"siteUrl":"https://becomeweasel.github.io","comments":{"utterances":{"repo":"BecomeWeasel/BecomeWeasel.github.io"}}}}},"pageContext":{"slug":"/programmers-flip-card/","nextSlug":"/programmers-build-race-road/","prevSlug":"/how-spring-handler-mapping-works-2/"}},
    "staticQueryHashes": ["1073350324","1956554647","2938748437"]}